<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>–ì–ª–∞–∑-–∫–ª–∏–∫–µ—Ä ‚úß</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style>
  /* –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
  /* –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–∏–Ω–∏-–∏–≥—Ä—ã */

  /* –ö–Ω–æ–ø–∫–∞ –º–∏–Ω–∏-–∏–≥—Ä—ã */
  .minigame-btn {
    padding: 12px 28px;
    font-size: 1.1rem;
    margin: 12px 8px;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    font-weight: bold;
    transition: all .2s;
    background: linear-gradient(45deg, #9C27B0, #673AB7);
    color: white;
    position: relative;
    z-index: 1;
  }
  
  .minigame-btn:hover {
    background: linear-gradient(45deg, #BA68C8, #7E57C2);
    transform: translateY(-2px);
  }

  /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∏–Ω–∏-–∏–≥—Ä—ã */
  .minigame-modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.95);
    backdrop-filter: blur(12px);
    z-index: 2000;
    align-items: center;
    justify-content: center;
  }
  
  .minigame-modal.active {
    display: flex;
  }
  
  .minigame-modal-content {
    background: linear-gradient(135deg, #0f001a, #1a0033, #2d004d);
    border: 3px solid #9C27B0;
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 0 80px rgba(156, 39, 176, 0.6);
    max-width: 800px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
  }

  /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
  .minigame-field {
    position: relative;
    width: 600px;
    height: 400px;
    background: linear-gradient(180deg, #0a0a2a 0%, #1a1a4a 100%);
    border: 2px solid #9C27B0;
    border-radius: 10px;
    overflow: hidden;
    margin: 20px auto;
    cursor: crosshair;
  }

  /* –ê—Å—Ç–µ—Ä–æ–∏–¥—ã */
  .asteroid {
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #8B4513, #654321, #3D2506);
    box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
    cursor: pointer;
    transition: transform 0.1s;
  }

  .asteroid:hover {
    transform: scale(1.1);
  }

  .asteroid.destroyed {
    animation: explode 0.5s forwards;
  }

  @keyframes explode {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.5); opacity: 0.5; }
    100% { transform: scale(0); opacity: 0; }
  }

  /* –ì–ª–∞–∑ –≤ —Ü–µ–Ω—Ç—Ä–µ */
  .minigame-eye {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    background: radial-gradient(circle at 40% 40%, #fff 0%, #d0e8ff 30%, #80b0ff 60%, #3060ff 100%);
    border-radius: 50%;
    border: 3px solid #2196F3;
    box-shadow: 0 0 40px rgba(33, 150, 243, 0.7);
    z-index: 2;
  }

  .minigame-eye .pupil {
    width: 30px;
    height: 30px;
    background: #000814;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .minigame-eye .highlight {
    width: 12px;
    height: 12px;
    background: white;
    border-radius: 50%;
    position: absolute;
    top: 30%;
    left: 60%;
    opacity: .8;
  }

  /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã */
  .minigame-stats {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
    padding: 15px;
    background: rgba(20,10,40,.8);
    border-radius: 15px;
    border: 1px solid #7b1fa2;
  }

  .stat-item {
    flex: 1;
    text-align: center;
    padding: 10px;
  }

  .stat-label {
    font-size: 0.9rem;
    color: #b0bec5;
    margin-bottom: 5px;
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: bold;
    color: #ffd700;
  }

  /* –¢–∞–π–º–µ—Ä –∏–≥—Ä—ã */
  .minigame-timer {
    font-size: 2rem;
    font-weight: bold;
    color: #76ff03;
    margin: 20px 0;
    text-shadow: 0 0 15px #76ff03;
  }

  /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
  .minigame-controls {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 25px;
  }

  .minigame-controls .btn {
    padding: 12px 30px;
    font-size: 1.1rem;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-weight: bold;
    transition: all .2s;
  }

  .start-game-btn {
    background: linear-gradient(45deg, #4CAF50, #2E7D32);
    color: white;
  }

  .start-game-btn:hover {
    background: linear-gradient(45deg, #66BB6A, #388E3C);
    transform: translateY(-3px);
  }

  .close-minigame-btn {
    background: linear-gradient(45deg, #f44336, #c62828);
    color: white;
  }

  .close-minigame-btn:hover {
    background: linear-gradient(45deg, #ef5350, #d32f2f);
    transform: translateY(-3px);
  }

  /* –£—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ */
  .difficulty-selector {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 20px 0;
  }

  .difficulty-btn {
    padding: 10px 25px;
    background: rgba(80, 40, 120, .4);
    border: 2px solid #7b1fa2;
    border-radius: 20px;
    color: white;
    cursor: pointer;
    transition: all .3s;
  }

  .difficulty-btn.active {
    background: #7b1fa2;
    border-color: #9c27b0;
    box-shadow: 0 0 15px rgba(123, 31, 162, 0.5);
  }

  .difficulty-btn:hover {
    transform: translateY(-2px);
  }

  /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã */
  .game-results {
    margin-top: 25px;
    padding: 20px;
    background: rgba(76, 175, 80, 0.1);
    border: 1px solid #4CAF50;
    border-radius: 15px;
    animation: fadeIn 0.5s;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .results-title {
    font-size: 1.4rem;
    color: #ffd700;
    margin-bottom: 15px;
  }

  .results-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 20px;
  }

  .result-item {
    text-align: center;
  }

  .result-label {
    font-size: 0.9rem;
    color: #b0bec5;
    margin-bottom: 5px;
  }

  .result-value {
    font-size: 1.3rem;
    font-weight: bold;
    color: #76ff03;
  }

  /* –°—Ç–∏–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞ */
  .admin-abuse-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: linear-gradient(45deg, rgba(255, 87, 34, 0.9), rgba(211, 47, 47, 0.9));
    border: 2px solid #ff3d00;
    border-radius: 15px;
    padding: 15px;
    z-index: 1000;
    min-width: 200px;
    backdrop-filter: blur(10px);
    box-shadow: 0 0 25px rgba(255, 61, 0, 0.5);
    font-family: monospace;
    text-align: center;
    animation: pulse-admin 2s infinite;
  }

  @keyframes pulse-admin {
    0%, 100% { box-shadow: 0 0 25px rgba(255, 61, 0, 0.5); }
    50% { box-shadow: 0 0 35px rgba(255, 61, 0, 0.8); }
  }

  .admin-abuse-title {
    font-size: 1.2rem;
    font-weight: bold;
    color: #fff;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .admin-abuse-timer {
    font-size: 1.8rem;
    font-weight: bold;
    color: #ffeb3b;
    text-shadow: 0 0 10px rgba(255, 235, 59, 0.5);
    font-family: monospace;
    letter-spacing: 2px;
  }

  .admin-abuse-status {
    font-size: 0.9rem;
    color: #ffccbc;
    margin-top: 8px;
    min-height: 20px;
  }

  .admin-abuse-active {
    background: linear-gradient(45deg, rgba(76, 175, 80, 0.9), rgba(56, 142, 60, 0.9));
    border-color: #4caf50;
    animation: pulse-admin-active 1.5s infinite;
  }

  @keyframes pulse-admin-active {
    0%, 100% { box-shadow: 0 0 30px rgba(76, 175, 80, 0.5); }
    50% { box-shadow: 0 0 45px rgba(76, 175, 80, 0.8); }
  }

  .admin-abuse-panel {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: blur(15px);
    z-index: 2000;
    align-items: center;
    justify-content: center;
  }

  .admin-abuse-panel.active {
    display: flex;
  }

  .admin-abuse-content {
    background: linear-gradient(135deg, #1a0033, #2d004d, #1a0033);
    border: 3px solid #ff3d00;
    border-radius: 20px;
    padding: 40px;
    text-align: center;
    box-shadow: 0 0 80px rgba(255, 61, 0, 0.6);
    max-width: 600px;
    width: 90%;
  }

  .admin-abuse-header {
    font-size: 2.5rem;
    color: #ffeb3b;
    margin-bottom: 20px;
    text-shadow: 0 0 20px rgba(255, 235, 59, 0.7);
  }

  .admin-abuse-message {
    font-size: 1.3rem;
    color: #fff;
    margin-bottom: 30px;
    line-height: 1.5;
  }

  .admin-abuse-actions {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 30px;
  }

  .admin-abuse-btn {
    padding: 12px 30px;
    font-size: 1.1rem;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s;
  }

  .admin-abuse-start {
    background: linear-gradient(45deg, #ff3d00, #d50000);
    color: white;
  }

  .admin-abuse-start:hover {
    background: linear-gradient(45deg, #ff5722, #ff1744);
    transform: translateY(-3px);
  }

  .admin-abuse-close {
    background: linear-gradient(45deg, #757575, #424242);
    color: white;
  }

  .admin-abuse-close:hover {
    background: linear-gradient(45deg, #9e9e9e, #616161);
    transform: translateY(-3px);
  }

  /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
  @media (max-width: 768px) {
    .minigame-field {
      width: 95%;
      height: 300px;
    }
    
    .minigame-stats {
      flex-direction: column;
      gap: 10px;
    }
    
    .minigame-controls {
      flex-direction: column;
      align-items: center;
    }
    
    .difficulty-selector {
      flex-wrap: wrap;
    }
    
    .admin-abuse-container {
      bottom: 10px;
      right: 10px;
      left: 10px;
      min-width: auto;
    }
    
    .admin-abuse-timer {
      font-size: 1.5rem;
    }
    
    .admin-abuse-header {
      font-size: 2rem;
    }
    
    .admin-abuse-actions {
      flex-direction: column;
    }
  }

  @media (max-width: 480px) {
    .minigame-field {
      height: 250px;
    }
    
    .minigame-modal-content {
      padding: 20px;
    }
    
    .minigame-timer {
      font-size: 1.5rem;
    }
    
    .admin-abuse-container {
      padding: 10px;
    }
    
    .admin-abuse-timer {
      font-size: 1.3rem;
    }
  }

  body {
    margin:0;
    min-height:100vh;
    font-family:system-ui,sans-serif;
    color:#f0e8ff;
    text-align:center;  
    padding:20px;
    position: relative;
    overflow-x: hidden;
  }

  /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
  .animated-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    background: linear-gradient(135deg, #0f001a 0%, #1a0033 25%, #2d004d 50%, #1a0033 75%, #0f001a 100%);
    background-size: 400% 400%;
    animation: gradientShift 20s ease infinite;
  }

  /* –§–æ–Ω –õ—É–Ω—ã */
  .moon-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    background: linear-gradient(135deg, #0a0a2a 0%, #1a1a3a 25%, #2a2a4a 50%, #1a1a3a 75%, #0a0a2a 100%);
    background-size: 400% 400%;
    animation: gradientShift 20s ease infinite;
    display: none;
  }

  /* –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –õ—É–Ω—ã */
  .moon-image {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 300px;
    height: 300px;
    background: radial-gradient(circle at center, #f0f0f0 0%, #c0c0c0 30%, #808080 70%, #404040 100%);
    border-radius: 50%;
    box-shadow: 0 0 100px rgba(255, 255, 200, 0.5),
                inset 0 0 50px rgba(0, 0, 0, 0.3);
    z-index: -1;
    opacity: 0.3;
    display: none;
  }

  /* –õ—É–Ω–Ω—ã–µ –∫—Ä–∞—Ç–µ—Ä—ã */
  .moon-crater {
    position: absolute;
    border-radius: 50%;
    background: rgba(100, 100, 100, 0.3);
  }

  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* –ü–ª–∞–≤–∞—é—â–∏–µ —á–∞—Å—Ç–∏—Ü—ã */
  .particles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
  }

  .particle {
    position: absolute;
    border-radius: 50%;
    opacity: 0.3;
    animation: float linear infinite;
  }

  @keyframes float {
    0% { transform: translateY(0) rotate(0deg); opacity: 0.3; }
    25% { opacity: 0.5; }
    50% { opacity: 0.3; }
    75% { opacity: 0.5; }
    100% { transform: translateY(-100vh) rotate(360deg); opacity: 0.3; }
  }

  /* –ü—É–ª—å—Å–∏—Ä—É—é—â–∏–µ —Å—Ñ–µ—Ä—ã */
  .pulsing-spheres {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
  }

  .sphere {
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(123, 31, 162, 0.2), transparent 70%);
    filter: blur(40px);
    animation: pulseSphere 8s ease-in-out infinite;
  }

  @keyframes pulseSphere {
    0%, 100% { transform: scale(1); opacity: 0.3; }
    50% { transform: scale(1.2); opacity: 0.5; }
  }

  /* –ú–µ—Ä—Ü–∞—é—â–∏–µ –∑–≤–µ–∑–¥—ã */
  .stars {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
  }

  .star {
    position: absolute;
    width: 2px;
    height: 2px;
    background: white;
    border-radius: 50%;
    animation: twinkle 3s infinite;
  }

  @keyframes twinkle {
    0%, 100% { opacity: 0.2; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.5); }
  }

  /* –í—Ä–∞—â–∞—é—â–∏–µ—Å—è —Å–ø–∏—Ä–∞–ª–∏ */
  .spirals {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
    opacity: 0.1;
  }

  .spiral {
    position: absolute;
    width: 300px;
    height: 300px;
    border: 1px solid rgba(123, 31, 162, 0.3);
    border-radius: 50%;
    animation: rotateSpiral 40s linear infinite;
  }

  .spiral:nth-child(2) {
    width: 500px;
    height: 500px;
    border-color: rgba(76, 175, 80, 0.2);
    animation-duration: 60s;
    animation-direction: reverse;
  }

  .spiral:nth-child(3) {
    width: 700px;
    height: 700px;
    border-color: rgba(255, 152, 0, 0.2);
    animation-duration: 80s;
  }

  @keyframes rotateSpiral {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(1.1); }
    100% { transform: rotate(360deg) scale(1); }
  }

  /* –¢–∞–π–º–µ—Ä –∫–æ—Ä–∞–±–ª—è */
  .ship-timer-container {
    position: fixed;
    top: 80px;
    left: 20px;
    background: rgba(20, 10, 40, 0.8);
    border: 2px solid #2196F3;
    border-radius: 15px;
    padding: 15px;
    z-index: 1000;
    min-width: 180px;
    backdrop-filter: blur(10px);
    box-shadow: 0 0 20px rgba(33, 150, 243, 0.3);
  }

  .ship-timer-title {
    font-size: 1.1rem;
    font-weight: bold;
    color: #2196F3;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .ship-timer {
    font-size: 1.8rem;
    font-weight: bold;
    color: #4FC3F7;
    text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
    font-family: monospace;
  }

  .ship-status {
    font-size: 0.9rem;
    color: #B0BEC5;
    margin-top: 8px;
    min-height: 20px;
  }

  /* –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å */
  .spaceship {
    position: fixed;
    bottom: -200px;
    right: 10%;
    width: 120px;
    height: 60px;
    z-index: 999;
    transition: all 2s ease-in-out;
    pointer-events: none;
  }

  .spaceship.arrived {
    bottom: 50px;
    pointer-events: auto;
    animation: hoverShip 3s ease-in-out infinite;
  }

  .spaceship.departing {
    bottom: -200px;
  }

  @keyframes hoverShip {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  .ship-body {
    position: absolute;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, #37474F, #546E7A);
    border-radius: 10px 10px 0 0;
    box-shadow: 0 0 20px rgba(33, 150, 243, 0.5);
  }

  .ship-cockpit {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 30px;
    background: linear-gradient(45deg, #29B6F6, #81D4FA);
    border-radius: 50%;
    border: 3px solid #1565C0;
  }

  .ship-wing {
    position: absolute;
    bottom: 0;
    width: 80px;
    height: 20px;
    background: linear-gradient(45deg, #455A64, #607D8B);
  }

  .ship-wing.left {
    left: -40px;
    border-radius: 5px 0 0 5px;
  }

  .ship-wing.right {
    right: -40px;
    border-radius: 0 5px 5px 0;
  }

  .ship-engine {
    position: absolute;
    bottom: -10px;
    width: 15px;
    height: 30px;
    background: linear-gradient(to top, #FF9800, #FF5722);
    border-radius: 5px;
    animation: engineGlow 1s infinite alternate;
  }

  @keyframes engineGlow {
    0% { box-shadow: 0 0 10px rgba(255, 152, 0, 0.5); }
    100% { box-shadow: 0 0 20px rgba(255, 87, 34, 0.8); }
  }

  .ship-engine.left-engine {
    left: 30px;
  }

  .ship-engine.right-engine {
    right: 30px;
  }

  /* –ö–Ω–æ–ø–∫–∞ –ø–æ—Å–∞–¥–∫–∏ */
  .board-ship-btn {
    position: fixed;
    bottom: 120px;
    right: calc(10% + 30px);
    padding: 12px 24px;
    font-size: 1.1rem;
    background: linear-gradient(45deg, #2196F3, #1976D2);
    color: white;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 0 20px rgba(33, 150, 243, 0.5);
    z-index: 1000;
    transition: all 0.3s;
    font-weight: bold;
    display: none;
  }

  .board-ship-btn:hover {
    background: linear-gradient(45deg, #42A5F5, #2196F3);
    transform: translateY(-3px);
    box-shadow: 0 0 30px rgba(33, 150, 243, 0.7);
  }

  /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–∏–±—ã—Ç–∏–∏ */
  .ship-notification {
    position: fixed;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(45deg, rgba(33, 150, 243, 0.9), rgba(25, 118, 210, 0.9));
    color: white;
    padding: 20px 30px;
    border-radius: 15px;
    font-size: 1.3rem;
    font-weight: bold;
    z-index: 2000;
    box-shadow: 0 0 30px rgba(33, 150, 243, 0.7);
    animation: pulseNotification 2s infinite;
    display: none;
  }

  @keyframes pulseNotification {
    0%, 100% { transform: translateX(-50%) scale(1); }
    50% { transform: translateX(-50%) scale(1.05); }
  }

  /* –õ—É–Ω–∞ –Ω–∞ —Ñ–æ–Ω–µ */
  .moon-particle {
    position: fixed;
    width: 4px;
    height: 4px;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 50%;
    animation: moonFloat linear infinite;
    z-index: -1;
    display: none;
  }

  @keyframes moonFloat {
    0% { transform: translateY(100vh) translateX(0); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(-100px) translateX(100px); opacity: 0; }
  }

  h1 { font-size:3.5rem; margin:20px 0 30px; text-shadow:0 0 20px #603; position: relative; z-index: 1; }
  .eye-container { position:relative; width:300px; height:300px; margin:0 auto 40px; z-index: 1; }
  .eye { width:100%; height:100%; border-radius:50%; position:relative; overflow:hidden; transition:all .25s ease; cursor:pointer; box-shadow:0 0 60px rgba(48,96,255,.7),inset 0 0 80px rgba(0,0,0,.4); }
  .eye:active:not(.low-energy) { transform:scale(0.94); }
  .pupil { width:120px; height:120px; background:#000814; border-radius:50%; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); box-shadow:inset 0 0 30px #000; }
  .highlight { width:44px; height:44px; background:white; border-radius:50%; position:absolute; top:30%; left:60%; opacity:.8; filter:blur(3px); }
  .stats { max-width:500px; margin:0 auto 30px; padding:20px; background:rgba(20,10,40,.6); border-radius:16px; border:1px solid #4a148c; backdrop-filter:blur(10px); position: relative; z-index: 1; }
  .energy-bar-container { width:100%; height:24px; background:#1a0033; border-radius:12px; overflow:hidden; border:2px solid #4a148c; }
  .energy-bar { height:100%; background:linear-gradient(90deg,#00e676,#76ff03); transition:width .6s ease; }
  .score { font-size:4.5rem; margin:15px 0 5px; text-shadow:0 0 25px #609; position: relative; z-index: 1; }
  .multiplier { font-size:1.4rem; color:#ffd700; margin-bottom:10px; position: relative; z-index: 1; }
  .prestige-btn { padding:14px 40px; font-size:1.3rem; background:#c62828; color:white; border:none; border-radius:30px; cursor:pointer; margin:20px auto; display:block; font-weight:bold; position: relative; z-index: 1; }
  .prestige-btn:disabled { background:#555; cursor:not-allowed; }
  .prestige-info { font-size:1.1rem; margin:10px 0; color:#ffeb3b; }
  .btn { padding:12px 28px; font-size:1.1rem; margin:12px 8px; border:none; border-radius:30px; cursor:pointer; font-weight:bold; transition:all .2s; position: relative; z-index: 1; }
  .btn-shop { background:#7b1fa2; color:white; }
  .btn-shop:hover { background:#9c27b0; transform:translateY(-2px); }
  .btn-ach { background:#ff6d00; color:white; }
  .btn-ach:hover { background:#ff8a33; transform:translateY(-2px); }
  .btn-draw { background:#00bfa5; color:white; }
  .btn-draw:hover { background:#00d6b2; transform:translateY(-2px); }
  #shop,#achievements,#prestige { display:none; max-width:640px; margin:40px auto; padding:25px; background:rgba(20,10,40,.8); border-radius:16px; border:1px solid #7b1fa2; backdrop-filter:blur(15px); position: relative; z-index: 1; }
  .draw-modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,.9); backdrop-filter:blur(12px); z-index:2000; align-items:center; justify-content:center; }
  .draw-modal.active { display:flex; }
  .draw-modal-content { background:linear-gradient(135deg,#1a0033,#2d004d,#1a0033); border:2px solid #7b1fa2; border-radius:20px; padding:20px; text-align:center; box-shadow:0 0 80px rgba(123,31,162,.6); }
  #drawCanvas { border-radius:50%; cursor:crosshair; border: 2px solid #7b1fa2; }
  .draw-controls { margin-top:20px; display:flex; flex-wrap: wrap; justify-content:center; align-items:center; gap:15px; color: white;}
  .draw-controls > label { font-size: 1.1rem; }
  .skin-grid,.ach-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(170px,1fr)); gap:20px; margin-top:25px; }
  .skin-item,.ach-item { background:rgba(80,40,120,.4); border:2px solid transparent; border-radius:12px; padding:15px; text-align:center; transition:all .2s; }
  .skin-item:hover,.ach-item:hover { background:rgba(100,60,140,.6); }
  .skin-item.owned { border-color:#00e676; }
  .skin-item.current { border-color:#ffeb3b; box-shadow:0 0 15px #ffeb3b80; }
  .ach-item.completed { border-color:#ffd54f; background:rgba(255,215,79,.15); }
  .skin-item .preview { width:120px; height:120px; margin:0 auto 12px; border-radius:50%; }
  .ach-item .icon { font-size:3.2rem; margin-bottom:10px; }
  .buy-btn { margin-top:10px; padding:8px 16px; border:none; border-radius:20px; background:#4caf50; color:white; font-weight:bold; cursor:pointer; }
  .buy-btn:disabled { background:#555; cursor:not-allowed; }
  .low-energy { filter:brightness(0.4) saturate(0.3); cursor:not-allowed; }
  .no-energy-text { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:#ff5252; font-size:1.4rem; font-weight:bold; text-shadow:0 0 15px #d50000; pointer-events:none; opacity:0; transition:opacity .6s; }

  /* –ü—Ä–æ–º–æ–∫–æ–¥—ã */
  .promo-toggle-btn { position:fixed; top:20px; right:20px; padding:12px 24px; font-size:1.1rem; background:#7b1fa2; color:white; border:none; border-radius:30px; cursor:pointer; box-shadow:0 4px 15px rgba(123,31,162,.5); z-index:1000; transition:all .2s; }
  .promo-toggle-btn:hover { background:#9c27b0; transform:translateY(-2px); }
  .promo-box { display:none; position:fixed; top:80px; right:20px; width:340px; padding:20px; background:rgba(40,20,80,.95); border-radius:16px; border:1px solid #7b1fa2; box-shadow:0 8px 30px rgba(0,0,0,.7); z-index:999; }

  /* –†—É–ª–µ—Ç–∫–∞ –∫–µ–π—Å–æ–≤ - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
  .case-modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,.9); backdrop-filter:blur(12px); z-index:2000; align-items:center; justify-content:center; }
  .case-modal.active { display:flex; }
  .case-modal-content { background:linear-gradient(135deg,#1a0033,#2d004d,#1a0033); border:2px solid #ffd700; border-radius:40px; padding:60px 80px; text-align:center; box-shadow:0 0 80px rgba(255,215,0,.6),inset 0 0 40px rgba(255,215,0,.1); animation:scaleIn 0.5s ease-out; }
  @keyframes scaleIn { from { transform:scale(0.8); opacity:0; } to { transform:scale(1); opacity:1; } }
  .case-roulette { font-size:12rem; font-weight:900; color:#ffd700; text-shadow:0 0 40px #ff8c00,0 0 80px #ff6b00,0 0 120px #ff4500; letter-spacing:20px; min-height:180px; display:flex; align-items:center; justify-content:center; font-family:monospace; }
  .roulette-rolling { animation:spin2d 0.15s linear infinite; }
  @keyframes spin2d { 0% { transform:scale(1) rotate(0deg); } 50% { transform:scale(1.05); } 100% { transform:scale(1) rotate(360deg); } }
  .case-modal-label { font-size:2.5rem; color:#ffeb3b; margin-bottom:30px; text-shadow:0 0 20px #ffeb3b; font-weight:bold; }
  .case-modal-result { font-size:1.8rem; color:#76ff03; margin-top:40px; text-shadow:0 0 15px #76ff03; font-weight:bold; }

  /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–æ—Ä–≥–æ–≤—Ü–∞ */
  .trader-btn {
    padding: 12px 28px;
    font-size: 1.1rem;
    margin: 12px 8px;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    font-weight: bold;
    transition: all .2s;
    background: #4CAF50;
    color: white;
    position: relative;
    z-index: 1;
  }
  
  .trader-btn:hover {
    background: #66BB6A;
    transform: translateY(-2px);
  }
  
  .trader-modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.9);
    backdrop-filter: blur(12px);
    z-index: 2000;
    align-items: center;
    justify-content: center;
  }
  
  .trader-modal.active {
    display: flex;
  }
  
  .trader-modal-content {
    background: linear-gradient(135deg, #1a0033, #2d004d, #1a0033);
    border: 2px solid #4CAF50;
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 0 60px rgba(76, 175, 80, 0.5);
    max-width: 700px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
  }
  
  .trader-items {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin: 25px 0;
  }
  
  .trader-item {
    background: rgba(80, 40, 120, .4);
    border: 2px solid #4CAF50;
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    transition: all .3s;
  }
  
  .trader-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
  }
  
  .trader-item-icon {
    font-size: 3.5rem;
    margin-bottom: 15px;
  }
  
  .trader-item-name {
    font-size: 1.4rem;
    font-weight: bold;
    margin-bottom: 10px;
    color: #ffffff;
  }
  
  .trader-item-desc {
    font-size: 0.9rem;
    opacity: 0.85;
    margin-bottom: 15px;
    min-height: 40px;
  }
  
  .trader-item-price {
    font-size: 1.2rem;
    color: #FFD700;
    margin-bottom: 15px;
    font-weight: bold;
  }
  
  .trader-buy-btn {
    padding: 10px 20px;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-weight: bold;
    transition: all .2s;
    width: 100%;
  }
  
  .trader-buy-btn:hover:not(:disabled) {
    background: #66BB6A;
    transform: scale(1.05);
  }
  
  .trader-buy-btn:disabled {
    background: #555;
    cursor: not-allowed;
  }
  
  .trader-timer {
    margin-top: 20px;
    padding: 15px;
    background: rgba(76, 175, 80, 0.2);
    border-radius: 10px;
    border: 1px solid #4CAF50;
  }
  
  .trader-timer-text {
    font-size: 1.1rem;
    color: #b0ffcc;
  }
  
  .trader-timer-value {
    font-size: 1.4rem;
    color: #FFD700;
    font-weight: bold;
    margin-top: 5px;
  }

  /* –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å */
  .inventory-btn {
    position: fixed;
    top: 20px;
    left: 20px;
    padding: 12px 24px;
    font-size: 1.1rem;
    background: #FF9800;
    color: white;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(255, 152, 0, 0.5);
    z-index: 1000;
    transition: all .2s;
    font-weight: bold;
  }
  
  .inventory-btn:hover {
    background: #FFB74D;
    transform: translateY(-2px);
  }
  
  .inventory-modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.9);
    backdrop-filter: blur(12px);
    z-index: 2000;
    align-items: center;
    justify-content: center;
  }
  
  .inventory-modal.active {
    display: flex;
  }
  
  .inventory-modal-content {
    background: linear-gradient(135deg, #1a0033, #2d004d, #1a0033);
    border: 2px solid #FF9800;
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 0 60px rgba(255, 152, 0, 0.5);
    max-width: 800px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
  }
  
  .inventory-items {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 20px;
    margin: 25px 0;
  }
  
  .inventory-item {
    background: rgba(80, 40, 120, .4);
    border: 2px solid #FF9800;
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    transition: all .3s;
    position: relative;
  }
  
  .inventory-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
  }
  
  .inventory-item-icon {
    font-size: 3.5rem;
    margin-bottom: 15px;
  }
  
  .inventory-item-name {
    font-size: 1.2rem;
    font-weight: bold;
    margin-bottom: 10px;
    color: #ffffff;
  }
  
  .inventory-item-desc {
    font-size: 0.85rem;
    opacity: 0.85;
    margin-bottom: 15px;
    min-height: 40px;
  }
  
  .inventory-item-quantity {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #FF9800;
    color: white;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.9rem;
  }
  
  .inventory-use-btn {
    padding: 8px 16px;
    background: #FF9800;
    color: white;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-weight: bold;
    transition: all .2s;
    width: 100%;
  }
  
  .inventory-use-btn:hover:not(:disabled) {
    background: #FFB74D;
    transform: scale(1.05);
  }
  
  .inventory-use-btn:disabled {
    background: #555;
    cursor: not-allowed;
  }
  
  .inventory-empty {
    padding: 40px;
    text-align: center;
    color: #b0bec5;
    font-size: 1.2rem;
  }
  
  .inventory-empty-icon {
    font-size: 4rem;
    margin-bottom: 20px;
    opacity: 0.5;
  }

  /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
  @media (max-width: 768px) {
    .case-modal-content { padding:40px 30px; border-radius:30px; }
    .case-roulette { font-size:8rem; min-height:120px; letter-spacing:10px; }
    .case-modal-label { font-size:1.8rem; margin-bottom:20px; }
    .case-modal-result { font-size:1.3rem; margin-top:25px; }
    .inventory-btn, .promo-toggle-btn {
      padding: 10px 20px;
      font-size: 1rem;
    }
    h1 { font-size: 2.8rem; }
    .ship-timer-container {
      top: 70px;
      left: 10px;
      padding: 10px;
      min-width: 150px;
    }
    .spaceship {
      width: 80px;
      height: 40px;
      right: 5%;
    }
    .board-ship-btn {
      bottom: 80px;
      right: calc(5% + 15px);
      padding: 8px 16px;
      font-size: 0.9rem;
    }
  }

  @media (max-width: 480px) {
    .case-modal-content { padding:30px 20px; border-radius:20px; }
    .case-roulette { font-size:6rem; min-height:100px; letter-spacing:5px; text-shadow:0 0 20px #ff8c00,0 0 40px #ff6b00; }
    .case-modal-label { font-size:1.5rem; margin-bottom:15px; }
    .case-modal-result { font-size:1.1rem; margin-top:20px; }
    h1 { font-size:2.2rem; }
    .score { font-size:3rem; }
    .multiplier { font-size:1rem; }
    .inventory-btn, .promo-toggle-btn {
      padding: 8px 16px;
      font-size: 0.9rem;
      top: 10px;
      left: 10px;
    }
    .promo-toggle-btn {
      right: 10px;
      top: 10px;
    }
    .sphere {
      filter: blur(20px);
    }
    .ship-timer-container {
      top: 60px;
      left: 5px;
      padding: 8px;
      min-width: 130px;
    }
    .ship-timer {
      font-size: 1.4rem;
    }
  }
</style>
</head>
<body>

<!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
<div class="animated-bg" id="mainBg"></div>
<div class="moon-bg" id="moonBg"></div>
<div class="moon-image" id="moonImage"></div>
<div class="particles" id="particles"></div>
<div class="pulsing-spheres" id="pulsingSpheres"></div>
<div class="stars" id="stars"></div>
<div class="spirals" id="spirals"></div>

<!-- –¢–∞–π–º–µ—Ä –∫–æ—Ä–∞–±–ª—è -->
<div class="ship-timer-container" id="shipTimerContainer">
  <div class="ship-timer-title">üöÄ –ö–æ—Ä–∞–±–ª—å</div>
  <div class="ship-timer" id="shipTimer">10:00</div>
  <div class="ship-status" id="shipStatus">–ü—Ä–∏–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑</div>
</div>

<!-- –¢–∞–π–º–µ—Ä –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞ -->
<div class="admin-abuse-container" id="adminAbuseContainer">
  <div class="admin-abuse-title">‚ö†Ô∏è –ê–¥–º–∏–Ω-–ê–±—å—é–∑</div>
  <div class="admin-abuse-timer" id="adminAbuseTimer">--:--:--</div>
  <div class="admin-abuse-status" id="adminAbuseStatus">–î–æ –Ω–∞—á–∞–ª–∞</div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->
<button class="inventory-btn" id="toggleInventory">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>

<!-- –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å -->
<div class="spaceship" id="spaceship">
  <div class="ship-body"></div>
  <div class="ship-cockpit"></div>
  <div class="ship-wing left"></div>
  <div class="ship-wing right"></div>
  <div class="ship-engine left-engine"></div>
  <div class="ship-engine right-engine"></div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –ø–æ—Å–∞–¥–∫–∏ -->
<button class="board-ship-btn" id="boardShipBtn">–°–µ—Å—Ç—å –≤ –∫–æ—Ä–∞–±–ª—å</button>

<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–∏–±—ã—Ç–∏–∏ -->
<div class="ship-notification" id="shipNotification">üöÄ –ö–æ—Ä–∞–±–ª—å –ø—Ä–∏–±—ã–ª!</div>

<div class="main-content">
  <h1>–ì–ª–∞–∑-–∫–ª–∏–∫–µ—Ä</h1>

  <div class="eye-container">
    <div class="eye" id="eye">
      <div class="pupil"></div>
      <div class="highlight"></div>
      <div class="no-energy-text" id="noEnergyMsg">–≠–Ω–µ—Ä–≥–∏—è –∏—Å—á–µ—Ä–ø–∞–Ω–∞<br>–û–∂–∏–¥–∞–π—Ç–µ 5 –º–∏–Ω</div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä—É–ª–µ—Ç–∫–∏ –∫–µ–π—Å–æ–≤ -->
  <div class="case-modal" id="caseModal">
    <div class="case-modal-content">
      <div class="case-modal-glow"></div>
      <div class="case-modal-label">üíé –¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–µ–π—Å üíé</div>
      <div class="case-roulette" id="caseRoulette">500</div>
      <div class="case-modal-result" id="caseModalResult"></div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä—É–ª–µ—Ç–∫–∏ —Å–∫–∏–Ω–æ–≤ -->
  <div class="case-modal" id="skinCaseModal">
    <div class="case-modal-content">
      <div class="case-modal-glow"></div>
      <div class="case-modal-label">üé® –ö–µ–π—Å —Å–æ —Å–∫–∏–Ω–∞–º–∏ üé®</div>
      <div style="display:flex; align-items:center; justify-content:center; gap:20px; margin:30px 0;">
        <div id="skinRouletteSkin" style="width:180px; height:180px; border-radius:50%; border:4px solid #ffd700; box-shadow:0 0 30px #ffd70080;"></div>
      </div>
      <div id="skinRouletteText" style="font-size:2.2rem; font-weight:bold; color:#76ff03; text-shadow:0 0 15px #76ff03; min-height:40px;">–ö—Ä—É—Ç–∏—Ç—Å—è...</div>
      <div class="case-modal-result" id="skinCaseModalResult"></div>
    </div>
  </div>

  <div class="score" id="score">0</div>
  <div class="multiplier" id="multiplier">√ó1</div>

  <div class="stats">
    <div class="energy-bar-container">
      <div class="energy-bar" id="energyBar"></div>
    </div>
    <div style="margin-top:12px; color:#b0ffcc; font-size:1.3rem;">
      –≠–Ω–µ—Ä–≥–∏—è: <span id="energyText">100 / 100</span>
    </div>
  </div>

  <div>
    <button class="btn btn-shop" id="toggleShop">–ú–∞–≥–∞–∑–∏–Ω</button>
    <button class="btn btn-ach" id="toggleAch">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
    <button class="btn trader-btn" id="toggleTrader">–¢–æ—Ä–≥–æ–≤–µ—Ü</button>
    <button class="btn minigame-btn" id="toggleMinigame">–ó–∞—â–∏—Ç–∞ –≥–ª–∞–∑–∞</button> <!-- –ù–û–í–ê–Ø –ö–ù–û–ü–ö–ê -->
    <button class="btn prestige-btn" id="togglePrestige">–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</button>
    <button class="btn btn-draw" id="toggleDraw">–ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –≥–ª–∞–∑</button>
  </div>

  <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
  <div class="inventory-modal" id="inventoryModal">
    <div class="inventory-modal-content">
      <h2>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
      <p style="color: #b0bec5; margin-bottom: 20px;">–¢—É—Ç —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ –∫—É–ø–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã</p>
      
      <div class="inventory-items" id="inventoryItems">
        <!-- –ü—Ä–µ–¥–º–µ—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
      </div>
      
      <button class="btn" id="closeInventory" style="margin-top: 25px; background: #d81b60;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>

  <!-- –î–æ–±–∞–≤–ª—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∏–Ω–∏-–∏–≥—Ä—ã -->
  <div class="minigame-modal" id="minigameModal">
    <div class="minigame-modal-content">
      <h2>üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –≥–ª–∞–∑–∞</h2>
      <p style="color: #b0bec5; margin-bottom: 20px;">–ó–∞—â–∏—â–∞–π –≥–ª–∞–∑ –æ—Ç –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤! –ö–ª–∏–∫–∞–π –ø–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞–º, —á—Ç–æ–±—ã —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –∏—Ö.</p>
      
      <div class="difficulty-selector" id="difficultySelector">
        <div class="difficulty-btn active" data-difficulty="easy">–õ—ë–≥–∫–∏–π</div>
        <div class="difficulty-btn" data-difficulty="medium">–°—Ä–µ–¥–Ω–∏–π</div>
        <div class="difficulty-btn" data-difficulty="hard">–°–ª–æ–∂–Ω—ã–π</div>
      </div>
      
      <div class="minigame-stats">
        <div class="stat-item">
          <div class="stat-label">–û—á–∫–∏</div>
          <div class="stat-value" id="minigameScore">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">–ê—Å—Ç–µ—Ä–æ–∏–¥—ã</div>
          <div class="stat-value" id="asteroidsDestroyed">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">–í—Ä–µ–º—è</div>
          <div class="minigame-timer" id="minigameTimer">60</div>
        </div>
      </div>
      
      <div class="minigame-field" id="minigameField">
        <div class="minigame-eye">
          <div class="pupil"></div>
          <div class="highlight"></div>
        </div>
        <!-- –ê—Å—Ç–µ—Ä–æ–∏–¥—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
      
      <div class="game-results" id="gameResults" style="display: none;">
        <div class="results-title">üéÆ –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</div>
        <div class="results-stats">
          <div class="result-item">
            <div class="result-label">–ù–∞–±—Ä–∞–Ω–æ –æ—á–∫–æ–≤</div>
            <div class="result-value" id="finalScore">0</div>
          </div>
          <div class="result-item">
            <div class="result-label">–£–Ω–∏—á—Ç–æ–∂–µ–Ω–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤</div>
            <div class="result-value" id="finalAsteroids">0</div>
          </div>
          <div class="result-item">
            <div class="result-label">–ü–æ–ª—É—á–µ–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏</div>
            <div class="result-value" id="finalEnergy">0</div>
          </div>
          <div class="result-item">
            <div class="result-label">–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</div>
            <div class="result-value" id="finalDifficulty">–õ—ë–≥–∫–∏–π</div>
          </div>
        </div>
        <div style="margin-top: 15px; color: #ffd700; font-size: 1.1rem;">
          <span id="bonusMessage"></span>
        </div>
      </div>
      
      <div class="minigame-controls">
        <button class="btn start-game-btn" id="startGameBtn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        <button class="btn close-minigame-btn" id="closeMinigameBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–∞–≥–∞–∑–∏–Ω -->
  <div id="shop">
    <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
    
    <div style="margin-bottom:30px; padding-bottom:20px; border-bottom:1px solid #7b1fa2;">
      <h3 style="margin-top:0;">–°–∫–∏–Ω—ã</h3>
      <div class="skin-grid" id="skinGrid"></div>
    </div>

    <div style="margin-bottom:30px;">
      <h3 style="margin-top:0;">–ö–µ–π—Å—ã</h3>
      <div style="background:rgba(80,40,120,.4); border:2px solid #7b1fa2; border-radius:12px; padding:20px; text-align:center; margin-bottom:20px;">
        <div style="font-size:3rem; margin-bottom:10px;">üíé</div>
        <div style="font-size:1.2rem; font-weight:bold; margin-bottom:10px;">–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–µ–π—Å</div>
        <div style="color:#b0bec5; margin-bottom:15px;">–í—ã–ø–∞–¥–∞–µ—Ç –æ—Ç 100 –¥–æ 10 000 –æ—á–∫–æ–≤!</div>
        <button class="btn btn-shop" id="openCaseBtn" style="background:#ffc107; color:#000; font-weight:bold;">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å (1500 –æ—á–∫–æ–≤)</button>
        <div id="caseResult" style="margin-top:15px; font-size:1.1rem; font-weight:bold; min-height:20px;"></div>
      </div>

      <div style="background:rgba(80,40,120,.4); border:2px solid #7b1fa2; border-radius:12px; padding:20px; text-align:center;">
        <div style="font-size:3rem; margin-bottom:10px;">üé®</div>
        <div style="font-size:1.2rem; font-weight:bold; margin-bottom:10px;">–ö–µ–π—Å —Å–æ —Å–∫–∏–Ω–∞–º–∏</div>
        <div style="color:#b0bec5; margin-bottom:15px;">–í—ã–ø–∞–¥–∞–µ—Ç —Ä–∞–Ω–¥–æ–º–Ω—ã–π —Å–∫–∏–Ω –∏–∑ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö!</div>
        <button class="btn btn-shop" id="openSkinCaseBtn" style="background:#e91e63; color:#fff; font-weight:bold;">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å (1000 –æ—á–∫–æ–≤)</button>
        <div id="skinCaseResult" style="margin-top:15px; font-size:1.1rem; font-weight:bold; min-height:20px;"></div>
      </div>
    </div>

    <button class="btn btn-shop" id="closeShop" style="margin-top:25px; background:#d81b60;">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>

  <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
  <div id="achievements">
    <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
    <div class="ach-grid" id="achGrid"></div>
    <button class="btn btn-ach" id="closeAch" style="margin-top:25px; background:#ff8a33;">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>

  <!-- –¢–æ—Ä–≥–æ–≤–µ—Ü -->
  <div class="trader-modal" id="traderModal">
    <div class="trader-modal-content">
      <h2>üõí –¢–æ—Ä–≥–æ–≤–µ—Ü</h2>
      <p style="color: #b0bec5; margin-bottom: 20px;">–¢–æ–≤–∞—Ä—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç</p>
      
      <div class="trader-items" id="traderItems">
        <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
      </div>
      
      <div class="trader-timer">
        <div class="trader-timer-text">–î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤:</div>
        <div class="trader-timer-value" id="traderTimer">5:00</div>
      </div>
      
      <button class="btn" id="closeTrader" style="margin-top: 25px; background: #d81b60;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>

  <!-- –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è -->
  <div id="prestige">
    <h2>–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</h2>
    <p class="prestige-info">–¢–µ–∫—É—â–µ–µ: <span id="currentPrestige">0</span></p>
    <p class="prestige-info">–°–ª–µ–¥—É—é—â–∏–π: √ó<span id="nextMultiplier">2</span> –∑–∞ –∫–ª–∏–∫</p>
    <button class="prestige-btn" id="doPrestige" disabled>–ü–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è</button>
    <p id="prestigeStatus" style="margin-top:15px; color:#ffeb3b;"></p>
    <button class="btn btn-shop" id="closePrestige" style="margin-top:25px; background:#d81b60;">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—è -->
  <div class="draw-modal" id="drawModal">
    <div class="draw-modal-content">
      <h2>–ù–∞—Ä–∏—Å—É–π —Å–≤–æ–π —Å–∫–∏–Ω</h2>
      <canvas id="drawCanvas" width="300" height="300"></canvas>
      <div class="draw-controls">
        <label for="backgroundColorPicker">–¶–≤–µ—Ç –≥–ª–∞–∑–∞:</label>
        <input type="color" id="backgroundColorPicker" value="#ffffff">
        <label for="colorPicker">–¶–≤–µ—Ç –∫–∏—Å—Ç–∏:</label>
        <input type="color" id="colorPicker" value="#000000">
        <label for="brushSize">–†–∞–∑–º–µ—Ä:</label>
        <input type="range" id="brushSize" min="1" max="50" value="5">
        <button class="btn" id="clearCanvasBtn">–û—á–∏—Å—Ç–∏—Ç—å</button>
        <button class="btn" id="saveSkinBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="btn" id="closeDrawModalBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

</div>

<!-- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞ -->
<div class="admin-abuse-panel" id="adminAbusePanel">
  <div class="admin-abuse-content">
    <div class="admin-abuse-header">‚ö†Ô∏è –ê–î–ú–ò–ù-–ê–ë–¨–Æ–ó ‚ö†Ô∏è</div>
    <div class="admin-abuse-message" id="adminAbuseMessage">
      –í—Ä–µ–º—è –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞ –Ω–∞—Å—Ç–∞–ª–æ!<br>
      –ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ —Ö–∞–æ—Å—É –∏ –±–µ–∑—É–º–∏—é!
    </div>
    <div class="admin-abuse-actions">
      <button class="admin-abuse-btn admin-abuse-start" id="startAdminAbuseBtn">–ù–ê–ß–ê–¢–¨ –ê–ë–¨–Æ–ó</button>
      <button class="admin-abuse-btn admin-abuse-close" id="closeAdminAbuseBtn">–û–¢–ú–ï–ù–ê</button>
    </div>
  </div>
</div>

<!-- –ü—Ä–æ–º–æ–∫–æ–¥—ã -->
<button class="promo-toggle-btn" id="togglePromo">–ü—Ä–æ–º–æ–∫–æ–¥</button>

<div class="promo-box" id="promoBox">
  <h3>–í–≤–µ–¥–∏ –ø—Ä–æ–º–æ–∫–æ–¥</h3>
  <input type="text" id="promoInput" class="promo-input" placeholder="–í–≤–µ–¥–∏ –ø—Ä–æ–º–æ–∫–æ–¥">
  <button class="promo-btn" id="activatePromo">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
  <div id="promoResult" class="promo-result"></div>
</div>

<script>
// =============================================
// –ú–ò–ù–ò-–ò–ì–†–ê "–ó–ê–©–ò–¢–ê –ì–õ–ê–ó–ê"
// =============================================

// DOM —ç–ª–µ–º–µ–Ω—Ç—ã –º–∏–Ω–∏-–∏–≥—Ä—ã
const toggleMinigameBtn = document.getElementById('toggleMinigame');
const minigameModal = document.getElementById('minigameModal');
const closeMinigameBtn = document.getElementById('closeMinigameBtn');
const startGameBtn = document.getElementById('startGameBtn');
const minigameField = document.getElementById('minigameField');
const minigameScoreEl = document.getElementById('minigameScore');
const asteroidsDestroyedEl = document.getElementById('asteroidsDestroyed');
const minigameTimerEl = document.getElementById('minigameTimer');
const gameResults = document.getElementById('gameResults');
const finalScoreEl = document.getElementById('finalScore');
const finalAsteroidsEl = document.getElementById('finalAsteroids');
const finalEnergyEl = document.getElementById('finalEnergy');
const finalDifficultyEl = document.getElementById('finalDifficulty');
const bonusMessageEl = document.getElementById('bonusMessage');
const difficultySelector = document.getElementById('difficultySelector');

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
let gameActive = false;
let gameTime = 60; // —Å–µ–∫—É–Ω–¥—ã
let gameTimer = null;
let minigameScore = 0;
let asteroidsDestroyed = 0;
let currentDifficulty = 'easy';
let asteroidInterval = null;
let asteroids = [];

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
const DIFFICULTY_SETTINGS = {
  easy: {
    asteroidSpeed: 1,
    spawnRate: 1000, // –º—Å
    asteroidSize: 35,
    pointsPerAsteroid: 10,
    energyPerAsteroid: 1
  },
  medium: {
    asteroidSpeed: 1.5,
    spawnRate: 800,
    asteroidSize: 30,
    pointsPerAsteroid: 15,
    energyPerAsteroid: 2
  },
  hard: {
    asteroidSpeed: 2,
    spawnRate: 600,
    asteroidSize: 25,
    pointsPerAsteroid: 20,
    energyPerAsteroid: 3
  }
};

// –°–æ–±—ã—Ç–∏—è –¥–ª—è –º–∏–Ω–∏-–∏–≥—Ä—ã
toggleMinigameBtn.onclick = () => {
  minigameModal.classList.add('active');
  resetGame();
};

closeMinigameBtn.onclick = () => {
  minigameModal.classList.remove('active');
  stopGame();
};

// –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
difficultySelector.addEventListener('click', (e) => {
  if (!e.target.classList.contains('difficulty-btn')) return;
  
  // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
  document.querySelectorAll('.difficulty-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  
  // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
  e.target.classList.add('active');
  currentDifficulty = e.target.dataset.difficulty;
});

// –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
startGameBtn.onclick = () => {
  if (gameActive) return;
  startGame();
};

// –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã
function startGame() {
  gameActive = true;
  minigameScore = 0;
  asteroidsDestroyed = 0;
  gameTime = 60;
  
  // –°–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∏–≥—Ä—ã
  gameResults.style.display = 'none';
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  updateGameUI();
  startGameBtn.textContent = '–ò–≥—Ä–∞ –∏–¥–µ—Ç...';
  startGameBtn.disabled = true;
  
  // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
  gameTimer = setInterval(() => {
    gameTime--;
    minigameTimerEl.textContent = gameTime;
    
    if (gameTime <= 0) {
      endGame();
    }
  }, 1000);
  
  // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–ø–∞–≤–Ω –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤
  asteroidInterval = setInterval(spawnAsteroid, DIFFICULTY_SETTINGS[currentDifficulty].spawnRate);
}

// –§—É–Ω–∫—Ü–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–≥—Ä—ã
function stopGame() {
  gameActive = false;
  
  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä—ã
  if (gameTimer) clearInterval(gameTimer);
  if (asteroidInterval) clearInterval(asteroidInterval);
  
  // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∞—Å—Ç–µ—Ä–æ–∏–¥—ã
  asteroids.forEach(asteroid => {
    if (asteroid.element && asteroid.element.parentNode) {
      asteroid.element.remove();
    }
  });
  asteroids = [];
  
  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
  startGameBtn.textContent = '–ù–∞—á–∞—Ç—å –∏–≥—Ä—É';
  startGameBtn.disabled = false;
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
function endGame() {
  stopGame();
  
  // –ù–∞—á–∏—Å–ª—è–µ–º –Ω–∞–≥—Ä–∞–¥—ã
  const settings = DIFFICULTY_SETTINGS[currentDifficulty];
  const energyReward = asteroidsDestroyed * settings.energyPerAsteroid;
  const scoreReward = minigameScore;
  
  // –î–æ–±–∞–≤–ª—è–µ–º —ç–Ω–µ—Ä–≥–∏—é –∏ –æ—á–∫–∏
  energy = Math.min(getMaxEnergy(), energy + energyReward);
  score += scoreReward;
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  updateUI();
  saveProgress();
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
  finalScoreEl.textContent = scoreReward.toLocaleString();
  finalAsteroidsEl.textContent = asteroidsDestroyed;
  finalEnergyEl.textContent = energyReward;
  finalDifficultyEl.textContent = 
    currentDifficulty === 'easy' ? '–õ—ë–≥–∫–∏–π' : 
    currentDifficulty === 'medium' ? '–°—Ä–µ–¥–Ω–∏–π' : '–°–ª–æ–∂–Ω—ã–π';
  
  // –ë–æ–Ω—É—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  let bonusMessage = '';
  if (asteroidsDestroyed >= 50) {
    bonusMessage = 'üî• –ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ! –¢—ã –º–∞—Å—Ç–µ—Ä –∑–∞—â–∏—Ç—ã!';
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–æ–Ω—É—Å
    score += 500;
    updateUI();
    saveProgress();
  } else if (asteroidsDestroyed >= 30) {
    bonusMessage = 'üëç –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!';
  } else if (asteroidsDestroyed >= 15) {
    bonusMessage = 'üòä –•–æ—Ä–æ—à–∞—è –∏–≥—Ä–∞!';
  } else {
    bonusMessage = 'üéØ –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!';
  }
  
  bonusMessageEl.textContent = bonusMessage;
  gameResults.style.display = 'block';
}

// –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ –∏–≥—Ä—ã
function resetGame() {
  stopGame();
  minigameScore = 0;
  asteroidsDestroyed = 0;
  gameTime = 60;
  updateGameUI();
  gameResults.style.display = 'none';
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
function updateGameUI() {
  minigameScoreEl.textContent = minigameScore;
  asteroidsDestroyedEl.textContent = asteroidsDestroyed;
  minigameTimerEl.textContent = gameTime;
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
function spawnAsteroid() {
  if (!gameActive) return;
  
  const settings = DIFFICULTY_SETTINGS[currentDifficulty];
  const asteroidSize = settings.asteroidSize;
  
  // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
  const asteroidEl = document.createElement('div');
  asteroidEl.className = 'asteroid';
  asteroidEl.style.width = `${asteroidSize}px`;
  asteroidEl.style.height = `${asteroidSize}px`;
  
  // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ø–æ–ª—è
  const side = Math.floor(Math.random() * 4); // 0: top, 1: right, 2: bottom, 3: left
  let startX, startY;
  
  switch(side) {
    case 0: // top
      startX = Math.random() * (minigameField.clientWidth - asteroidSize);
      startY = -asteroidSize;
      break;
    case 1: // right
      startX = minigameField.clientWidth;
      startY = Math.random() * (minigameField.clientHeight - asteroidSize);
      break;
    case 2: // bottom
      startX = Math.random() * (minigameField.clientWidth - asteroidSize);
      startY = minigameField.clientHeight;
      break;
    case 3: // left
      startX = -asteroidSize;
      startY = Math.random() * (minigameField.clientHeight - asteroidSize);
      break;
  }
  
  asteroidEl.style.left = `${startX}px`;
  asteroidEl.style.top = `${startY}px`;
  
  // –¶–µ–ª—å - —Ü–µ–Ω—Ç—Ä –≥–ª–∞–∑–∞
  const targetX = minigameField.clientWidth / 2;
  const targetY = minigameField.clientHeight / 2;
  
  // –í—ã—á–∏—Å–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  const dx = targetX - startX;
  const dy = targetY - startY;
  const distance = Math.sqrt(dx * dx + dy * dy);
  const speed = settings.asteroidSpeed;
  
  // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –≤–µ–∫—Ç–æ—Ä –∏ —É–º–Ω–æ–∂–∞–µ–º –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å
  const vx = (dx / distance) * speed;
  const vy = (dy / distance) * speed;
  
  // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–º–Ω–æ–≥–æ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –≤ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é
  const randomFactor = 0.3;
  const finalVx = vx + (Math.random() - 0.5) * randomFactor;
  const finalVy = vy + (Math.random() - 0.5) * randomFactor;
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∞—Å—Ç–µ—Ä–æ–∏–¥—É
  asteroidEl.onclick = () => {
    if (!gameActive || asteroidEl.classList.contains('destroyed')) return;
    
    // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è
    asteroidEl.classList.add('destroyed');
    
    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç
    minigameScore += settings.pointsPerAsteroid;
    asteroidsDestroyed++;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    updateGameUI();
    
    // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
    setTimeout(() => {
      if (asteroidEl.parentNode) {
        asteroidEl.remove();
        // –£–¥–∞–ª—è–µ–º –∏–∑ –º–∞—Å—Å–∏–≤–∞
        const index = asteroids.findIndex(a => a.element === asteroidEl);
        if (index > -1) {
          asteroids.splice(index, 1);
        }
      }
    }, 500);
  };
  
  // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞ –ø–æ–ª–µ
  minigameField.appendChild(asteroidEl);
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
  const asteroid = {
    element: asteroidEl,
    x: startX,
    y: startY,
    vx: finalVx,
    vy: finalVy,
    size: asteroidSize
  };
  
  asteroids.push(asteroid);
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤
function updateAsteroids() {
  if (!gameActive) return;
  
  for (let i = asteroids.length - 1; i >= 0; i--) {
    const asteroid = asteroids[i];
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é
    asteroid.x += asteroid.vx;
    asteroid.y += asteroid.vy;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –≥–ª–∞–∑–æ–º
    const eyeX = minigameField.clientWidth / 2;
    const eyeY = minigameField.clientHeight / 2;
    const eyeRadius = 40; // —Ä–∞–¥–∏—É—Å –≥–ª–∞–∑–∞
    
    const distance = Math.sqrt(
      Math.pow(asteroid.x - eyeX, 2) + 
      Math.pow(asteroid.y - eyeY, 2)
    );
    
    // –ï—Å–ª–∏ –∞—Å—Ç–µ—Ä–æ–∏–¥ –¥–æ—Å—Ç–∏–≥ –≥–ª–∞–∑–∞
    if (distance < eyeRadius + asteroid.size / 2) {
      // –ú–∏–≥–∞–Ω–∏–µ –≥–ª–∞–∑–∞
      const eye = document.querySelector('.minigame-eye');
      eye.style.boxShadow = '0 0 40px rgba(255, 0, 0, 0.9)';
      setTimeout(() => {
        eye.style.boxShadow = '0 0 40px rgba(33, 150, 243, 0.7)';
      }, 200);
      
      // –£–¥–∞–ª—è–µ–º –∞—Å—Ç–µ—Ä–æ–∏–¥
      asteroid.element.remove();
      asteroids.splice(i, 1);
      continue;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã—Ö–æ–¥ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –ø–æ–ª—è
    if (
      asteroid.x < -asteroid.size * 2 || 
      asteroid.x > minigameField.clientWidth + asteroid.size * 2 ||
      asteroid.y < -asteroid.size * 2 || 
      asteroid.y > minigameField.clientHeight + asteroid.size * 2
    ) {
      // –£–¥–∞–ª—è–µ–º –∞—Å—Ç–µ—Ä–æ–∏–¥
      asteroid.element.remove();
      asteroids.splice(i, 1);
      continue;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –Ω–∞ —ç–∫—Ä–∞–Ω–µ
    asteroid.element.style.left = `${asteroid.x}px`;
    asteroid.element.style.top = `${asteroid.y}px`;
  }
}

// –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
function gameLoop() {
  updateAsteroids();
  requestAnimationFrame(gameLoop);
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
gameLoop();

// =============================================
// –ö–û–°–ú–ò–ß–ï–°–ö–ò–ô –ö–û–†–ê–ë–õ–¨
// =============================================
const SHIP_CONFIG = {
  ARRIVAL_INTERVAL: 10 * 60 * 1000, // 10 –º–∏–Ω—É—Ç –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
  STAY_DURATION: 3 * 60 * 1000, // 3 –º–∏–Ω—É—Ç—ã –Ω–∞ –õ—É–Ω–µ
  MOON_MULTIPLIER: 10, // –ú–Ω–æ–∂–∏—Ç–µ–ª—å –Ω–∞ –õ—É–Ω–µ
  STORAGE_KEY: 'eyeClickerShipData'
};

let shipData = JSON.parse(localStorage.getItem(SHIP_CONFIG.STORAGE_KEY)) || {
  nextArrival: Date.now() + SHIP_CONFIG.ARRIVAL_INTERVAL,
  isOnMoon: false,
  moonTimeLeft: 0,
  lastUpdate: Date.now()
};

let isShipArrived = false;
let isOnMoon = shipData.isOnMoon;
let moonTimeLeft = shipData.moonTimeLeft;
let shipInterval = null;
let moonInterval = null;
let moonMultiplierActive = false;

// DOM —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ—Ä–∞–±–ª—è
const spaceship = document.getElementById('spaceship');
const boardShipBtn = document.getElementById('boardShipBtn');
const shipNotification = document.getElementById('shipNotification');
const shipTimer = document.getElementById('shipTimer');
const shipStatus = document.getElementById('shipStatus');
const shipTimerContainer = document.getElementById('shipTimerContainer');
const mainBg = document.getElementById('mainBg');
const moonBg = document.getElementById('moonBg');
const moonImage = document.getElementById('moonImage');

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∞–±–ª—è
function initSpaceship() {
  // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ –∏–≥—Ä–∞ –±—ã–ª–∞ –∑–∞–∫—Ä—ã—Ç–∞
  const timePassed = Date.now() - shipData.lastUpdate;
  
  if (shipData.isOnMoon) {
    // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –±—ã–ª –Ω–∞ –õ—É–Ω–µ, —É–º–µ–Ω—å—à–∞–µ–º –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
    moonTimeLeft = Math.max(0, shipData.moonTimeLeft - timePassed);
    if (moonTimeLeft <= 0) {
      // –í—Ä–µ–º—è –Ω–∞ –õ—É–Ω–µ –∏—Å—Ç–µ–∫–ª–æ
      isOnMoon = false;
      shipData.isOnMoon = false;
      moonTimeLeft = 0;
      returnFromMoon();
    } else {
      // –ò–≥—Ä–æ–∫ –≤—Å–µ –µ—â–µ –Ω–∞ –õ—É–Ω–µ
      isOnMoon = true;
      goToMoon();
      startMoonTimer();
    }
  }
  
  // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–∏–±—ã—Ç–∏—è
  if (!shipData.isOnMoon) {
    const timeUntilArrival = shipData.nextArrival - Date.now();
    if (timeUntilArrival <= 0) {
      // –ö–æ—Ä–∞–±–ª—å –¥–æ–ª–∂–µ–Ω –±—ã–ª –ø—Ä–∏–±—ã—Ç—å
      shipArrival();
    } else {
      startShipTimer();
    }
  }
  
  saveShipData();
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä–∞–±–ª—è
function saveShipData() {
  shipData.lastUpdate = Date.now();
  shipData.isOnMoon = isOnMoon;
  shipData.moonTimeLeft = moonTimeLeft;
  localStorage.setItem(SHIP_CONFIG.STORAGE_KEY, JSON.stringify(shipData));
}

// –¢–∞–π–º–µ—Ä –¥–æ –ø—Ä–∏–±—ã—Ç–∏—è –∫–æ—Ä–∞–±–ª—è
function startShipTimer() {
  if (shipInterval) clearInterval(shipInterval);
  
  shipInterval = setInterval(() => {
    const timeUntilArrival = shipData.nextArrival - Date.now();
    
    if (timeUntilArrival <= 0) {
      clearInterval(shipInterval);
      shipArrival();
      return;
    }
    
    const minutes = Math.floor(timeUntilArrival / 60000);
    const seconds = Math.floor((timeUntilArrival % 60000) / 1000);
    shipTimer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    shipStatus.textContent = '–ü—Ä–∏–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑';
  }, 1000);
}

// –ü—Ä–∏–±—ã—Ç–∏–µ –∫–æ—Ä–∞–±–ª—è
function shipArrival() {
  isShipArrived = true;
  spaceship.classList.add('arrived');
  boardShipBtn.style.display = 'block';
  shipNotification.style.display = 'block';
  shipTimer.textContent = '–ü–†–ò–ë–´–õ';
  shipStatus.textContent = '–ö–æ—Ä–∞–±–ª—å –æ–∂–∏–¥–∞–µ—Ç';
  shipTimerContainer.style.borderColor = '#4CAF50';
  shipTimerContainer.style.boxShadow = '0 0 20px rgba(76, 175, 80, 0.5)';
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
  setTimeout(() => {
    shipNotification.style.display = 'none';
  }, 5000);
  
  // –ö–æ—Ä–∞–±–ª—å —É–ª–µ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–µ —Å–µ–ª
  setTimeout(() => {
    if (!isOnMoon && isShipArrived) {
      shipDeparture();
    }
  }, 60000);
}

// –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∞–±–ª—è
function shipDeparture() {
  if (isOnMoon) return; // –ù–µ —É–ª–µ—Ç–∞–µ–º –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–∞ –õ—É–Ω–µ
  
  isShipArrived = false;
  spaceship.classList.remove('arrived');
  spaceship.classList.add('departing');
  boardShipBtn.style.display = 'none';
  
  // –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–ª–µ—Ç
  shipData.nextArrival = Date.now() + SHIP_CONFIG.ARRIVAL_INTERVAL;
  saveShipData();
  
  // –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
  setTimeout(() => {
    spaceship.classList.remove('departing');
    shipTimerContainer.style.borderColor = '#2196F3';
    shipTimerContainer.style.boxShadow = '0 0 20px rgba(33, 150, 243, 0.3)';
    startShipTimer();
  }, 2000);
}

// –ü–æ—Å–∞–¥–∫–∞ –≤ –∫–æ—Ä–∞–±–ª—å
function boardSpaceship() {
  if (!isShipArrived || isOnMoon) return;
  
  isOnMoon = true;
  isShipArrived = false;
  boardShipBtn.style.display = 'none';
  spaceship.classList.remove('arrived');
  spaceship.classList.add('departing');
  
  // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –õ—É–Ω—É
  setTimeout(() => {
    goToMoon();
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è –Ω–∞ –õ—É–Ω–µ
    moonTimeLeft = SHIP_CONFIG.STAY_DURATION;
    startMoonTimer();
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 –º–∏–Ω—É—Ç—ã
    setTimeout(() => {
      if (isOnMoon) {
        returnFromMoon();
      }
    }, SHIP_CONFIG.STAY_DURATION);
    
    // –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–ª–µ—Ç
    shipData.nextArrival = Date.now() + SHIP_CONFIG.ARRIVAL_INTERVAL;
    saveShipData();
  }, 2000);
}

// –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –õ—É–Ω—É
function goToMoon() {
  isOnMoon = true;
  moonMultiplierActive = true;
  
  // –ú–µ–Ω—è–µ–º —Ñ–æ–Ω
  mainBg.style.display = 'none';
  moonBg.style.display = 'block';
  moonImage.style.display = 'block';
  
  // –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Ç–µ—Ä—ã –Ω–∞ –õ—É–Ω–µ
  createMoonCraters();
  
  // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã –¥–ª—è –õ—É–Ω—ã
  createMoonParticles();
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  shipTimer.textContent = '–õ–£–ù–ê';
  shipStatus.textContent = '√ó10 –∑–∞ –∫–ª–∏–∫';
  shipTimerContainer.style.borderColor = '#FF9800';
  shipTimerContainer.style.boxShadow = '0 0 20px rgba(255, 152, 0, 0.5)';
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  shipNotification.textContent = 'üåï –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –õ—É–Ω—É! √ó10 –∑–∞ –∫–ª–∏–∫!';
  shipNotification.style.display = 'block';
  shipNotification.style.background = 'linear-gradient(45deg, rgba(255, 152, 0, 0.9), rgba(245, 124, 0, 0.9))';
  
  setTimeout(() => {
    shipNotification.style.display = 'none';
  }, 5000);
}

// –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ —Å –õ—É–Ω—ã
function returnFromMoon() {
  isOnMoon = false;
  moonMultiplierActive = false;
  
  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ã—á–Ω—ã–π —Ñ–æ–Ω
  moonBg.style.display = 'none';
  moonImage.style.display = 'none';
  mainBg.style.display = 'block';
  
  // –£–¥–∞–ª—è–µ–º –ª—É–Ω–Ω—ã–µ —á–∞—Å—Ç–∏—Ü—ã
  document.querySelectorAll('.moon-particle').forEach(p => p.remove());
  document.querySelectorAll('.moon-crater').forEach(c => c.remove());
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  shipTimer.textContent = '10:00';
  shipStatus.textContent = '–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–ª–µ—Ç';
  shipTimerContainer.style.borderColor = '#2196F3';
  shipTimerContainer.style.boxShadow = '0 0 20px rgba(33, 150, 243, 0.3)';
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  shipNotification.textContent = 'üöÄ –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ –ó–µ–º–ª—é!';
  shipNotification.style.display = 'block';
  shipNotification.style.background = 'linear-gradient(45deg, rgba(33, 150, 243, 0.9), rgba(25, 118, 210, 0.9))';
  
  setTimeout(() => {
    shipNotification.style.display = 'none';
  }, 3000);
  
  // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –∫–æ—Ä–∞–±–ª—è –∑–∞–Ω–æ–≤–æ
  startShipTimer();
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
  shipData.isOnMoon = false;
  shipData.moonTimeLeft = 0;
  saveShipData();
}

// –¢–∞–π–º–µ—Ä –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è –Ω–∞ –õ—É–Ω–µ
function startMoonTimer() {
  if (moonInterval) clearInterval(moonInterval);
  
  moonInterval = setInterval(() => {
    if (!isOnMoon) {
      clearInterval(moonInterval);
      return;
    }
    
    moonTimeLeft -= 1000;
    
    if (moonTimeLeft <= 0) {
      clearInterval(moonInterval);
      returnFromMoon();
      return;
    }
    
    const minutes = Math.floor(moonTimeLeft / 60000);
    const seconds = Math.floor((moonTimeLeft % 60000) / 1000);
    shipTimer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    shipStatus.textContent = '–û—Å—Ç–∞–ª–æ—Å—å –Ω–∞ –õ—É–Ω–µ';
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
    shipData.moonTimeLeft = moonTimeLeft;
    saveShipData();
  }, 1000);
}

// –°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Ç–µ—Ä–æ–≤ –Ω–∞ –õ—É–Ω–µ
function createMoonCraters() {
  const craterCount = 15;
  
  for (let i = 0; i < craterCount; i++) {
    const crater = document.createElement('div');
    crater.className = 'moon-crater';
    
    // –°–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—Ç 10px –¥–æ 40px
    const size = Math.random() * 30 + 10;
    crater.style.width = `${size}px`;
    crater.style.height = `${size}px`;
    
    // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –Ω–∞ –õ—É–Ω–µ
    const angle = Math.random() * Math.PI * 2;
    const distance = Math.random() * 120;
    crater.style.left = `calc(50% + ${Math.cos(angle) * distance}px)`;
    crater.style.top = `calc(50% + ${Math.sin(angle) * distance}px)`;
    
    moonImage.appendChild(crater);
  }
}

// –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –¥–ª—è –õ—É–Ω—ã
function createMoonParticles() {
  const particleCount = 30;
  
  for (let i = 0; i < particleCount; i++) {
    const particle = document.createElement('div');
    particle.className = 'moon-particle';
    
    // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
    particle.style.left = `${Math.random() * 100}%`;
    
    // –°–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    const delay = Math.random() * 5;
    const duration = Math.random() * 10 + 5;
    particle.style.animationDelay = `${delay}s`;
    particle.style.animationDuration = `${duration}s`;
    
    document.body.appendChild(particle);
  }
}

// =============================================
// –ê–ù–ò–ú–ò–†–û–í–ê–ù–ù–´–ô –§–û–ù
// =============================================
function createAnimatedBackground() {
  // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã
  const particlesContainer = document.getElementById('particles');
  const particleCount = 50;
  
  for (let i = 0; i < particleCount; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    
    // –°–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—Ç 2px –¥–æ 8px
    const size = Math.random() * 6 + 2;
    particle.style.width = `${size}px`;
    particle.style.height = `${size}px`;
    
    // –°–ª—É—á–∞–π–Ω—ã–π —Ü–≤–µ—Ç
    const colors = [
      'rgba(123, 31, 162, 0.5)', // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
      'rgba(76, 175, 80, 0.5)',  // –ó–µ–ª–µ–Ω—ã–π
      'rgba(255, 152, 0, 0.5)',  // –û—Ä–∞–Ω–∂–µ–≤—ã–π
      'rgba(33, 150, 243, 0.5)', // –ì–æ–ª—É–±–æ–π
      'rgba(233, 30, 99, 0.5)',  // –†–æ–∑–æ–≤—ã–π
      'rgba(255, 215, 0, 0.5)'   // –ó–æ–ª–æ—Ç–æ–π
    ];
    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
    
    // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
    particle.style.left = `${Math.random() * 100}%`;
    particle.style.top = `${Math.random() * 100}%`;
    
    // –°–ª—É—á–∞–π–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
    const duration = Math.random() * 20 + 10; // –æ—Ç 10 –¥–æ 30 —Å–µ–∫—É–Ω–¥
    const delay = Math.random() * 5; // –∑–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç 0 –¥–æ 5 —Å–µ–∫—É–Ω–¥
    particle.style.animationDuration = `${duration}s`;
    particle.style.animationDelay = `${delay}s`;
    
    particlesContainer.appendChild(particle);
  }
  
  // –°–æ–∑–¥–∞–µ–º –ø—É–ª—å—Å–∏—Ä—É—é—â–∏–µ —Å—Ñ–µ—Ä—ã
  const spheresContainer = document.getElementById('pulsingSpheres');
  const sphereCount = 5;
  
  for (let i = 0; i < sphereCount; i++) {
    const sphere = document.createElement('div');
    sphere.className = 'sphere';
    
    // –°–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—Ç 100px –¥–æ 300px
    const size = Math.random() * 200 + 100;
    sphere.style.width = `${size}px`;
    sphere.style.height = `${size}px`;
    
    // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
    sphere.style.left = `${Math.random() * 100}%`;
    sphere.style.top = `${Math.random() * 100}%`;
    
    // –°–ª—É—á–∞–π–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
    const duration = Math.random() * 10 + 6; // –æ—Ç 6 –¥–æ 16 —Å–µ–∫—É–Ω–¥
    const delay = Math.random() * 5;
    sphere.style.animationDuration = `${duration}s`;
    sphere.style.animationDelay = `${delay}s`;
    
    spheresContainer.appendChild(sphere);
  }
  
  // –°–æ–∑–¥–∞–µ–º –º–µ—Ä—Ü–∞—é—â–∏–µ –∑–≤–µ–∑–¥—ã
  const starsContainer = document.getElementById('stars');
  const starCount = 100;
  
  for (let i = 0; i < starCount; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    
    // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
    star.style.left = `${Math.random() * 100}%`;
    star.style.top = `${Math.random() * 100}%`;
    
    // –°–ª—É—á–∞–π–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
    const duration = Math.random() * 4 + 1; // –æ—Ç 1 –¥–æ 5 —Å–µ–∫—É–Ω–¥
    const delay = Math.random() * 3;
    star.style.animationDuration = `${duration}s`;
    star.style.animationDelay = `${delay}s`;
    
    starsContainer.appendChild(star);
  }
  
  // –°–æ–∑–¥–∞–µ–º –≤—Ä–∞—â–∞—é—â–∏–µ—Å—è —Å–ø–∏—Ä–∞–ª–∏
  const spiralsContainer = document.getElementById('spirals');
  
  for (let i = 0; i < 3; i++) {
    const spiral = document.createElement('div');
    spiral.className = 'spiral';
    
    // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Å–ø–∏—Ä–∞–ª–∏
    spiral.style.left = '50%';
    spiral.style.top = '50%';
    spiral.style.transform = 'translate(-50%, -50%)';
    
    spiralsContainer.appendChild(spiral);
  }
}

// =============================================
// –ê–î–ú–ò–ù-–ê–ë–¨–Æ–ó –°–ò–°–¢–ï–ú–ê
// =============================================

const ADMIN_ABUSE_CONFIG = {
  TARGET_TIME: 21, // 21:00 –ø–æ –ú–æ—Å–∫–≤–µ
  STORAGE_KEY: 'eyeClickerAdminAbuseData',
  ACTIVE_DURATION: 30 * 60 * 1000 // 30 –º–∏–Ω—É—Ç –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
};

let adminAbuseData = JSON.parse(localStorage.getItem(ADMIN_ABUSE_CONFIG.STORAGE_KEY)) || {
  lastActive: null,
  isActive: false,
  endTime: null,
  nextEvent: null
};

let adminAbuseTimer = null;
let isAdminAbuseActive = adminAbuseData.isActive;
let adminAbuseEndTime = adminAbuseData.endTime;

// DOM —ç–ª–µ–º–µ–Ω—Ç—ã –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
const adminAbuseContainer = document.getElementById('adminAbuseContainer');
const adminAbuseTimerEl = document.getElementById('adminAbuseTimer');
const adminAbuseStatusEl = document.getElementById('adminAbuseStatus');
const adminAbusePanel = document.getElementById('adminAbusePanel');
const adminAbuseMessageEl = document.getElementById('adminAbuseMessage');
const startAdminAbuseBtn = document.getElementById('startAdminAbuseBtn');
const closeAdminAbuseBtn = document.getElementById('closeAdminAbuseBtn');

// –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
function getMoscowTime() {
  const now = new Date();
  // –ú–æ—Å–∫–≤–∞ UTC+3
  const moscowOffset = 3 * 60; // –≤ –º–∏–Ω—É—Ç–∞—Ö
  const localOffset = now.getTimezoneOffset(); // –≤ –º–∏–Ω—É—Ç–∞—Ö
  const moscowTime = new Date(now.getTime() + (moscowOffset + localOffset) * 60000);
  return moscowTime;
}

// –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
function calculateTimeToAdminAbuse() {
  const moscowTime = getMoscowTime();
  const currentHour = moscowTime.getHours();
  const currentMinute = moscowTime.getMinutes();
  const currentSecond = moscowTime.getSeconds();
  
  // –í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è –¥–æ 21:00
  let hoursUntil = ADMIN_ABUSE_CONFIG.TARGET_TIME - currentHour - 1;
  let minutesUntil = 59 - currentMinute;
  let secondsUntil = 59 - currentSecond;
  
  // –ï—Å–ª–∏ —É–∂–µ –ø–æ—Å–ª–µ 21:00, –∂–¥–µ–º –¥–æ 21:00 —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è
  if (currentHour >= ADMIN_ABUSE_CONFIG.TARGET_TIME) {
    hoursUntil += 24;
  }
  
  // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞
  if (secondsUntil === 60) {
    secondsUntil = 0;
    minutesUntil++;
  }
  if (minutesUntil === 60) {
    minutesUntil = 0;
    hoursUntil++;
  }
  
  return {
    hours: hoursUntil,
    minutes: minutesUntil,
    seconds: secondsUntil,
    totalSeconds: hoursUntil * 3600 + minutesUntil * 60 + secondsUntil
  };
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
function updateAdminAbuseTimer() {
  if (isAdminAbuseActive) {
    // –ê–¥–º–∏–Ω-–∞–±—å—é–∑ –∞–∫—Ç–∏–≤–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
    const timeLeft = adminAbuseEndTime - Date.now();
    
    if (timeLeft <= 0) {
      endAdminAbuse();
      return;
    }
    
    const hours = Math.floor(timeLeft / 3600000);
    const minutes = Math.floor((timeLeft % 3600000) / 60000);
    const seconds = Math.floor((timeLeft % 60000) / 1000);
    
    adminAbuseTimerEl.textContent = 
      `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    adminAbuseStatusEl.textContent = '–ê–±—å—é–∑ –∞–∫—Ç–∏–≤–µ–Ω!';
    adminAbuseContainer.classList.add('admin-abuse-active');
    
  } else {
    // –ê–¥–º–∏–Ω-–∞–±—å—é–∑ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ä–µ–º—è –¥–æ –Ω–∞—á–∞–ª–∞
    const timeTo = calculateTimeToAdminAbuse();
    
    adminAbuseTimerEl.textContent = 
      `${timeTo.hours.toString().padStart(2, '0')}:${timeTo.minutes.toString().padStart(2, '0')}:${timeTo.seconds.toString().padStart(2, '0')}`;
    
    if (timeTo.totalSeconds <= 300) { // 5 –º–∏–Ω—É—Ç –∏–ª–∏ –º–µ–Ω—å—à–µ
      adminAbuseStatusEl.textContent = '–°–∫–æ—Ä–æ –Ω–∞—á–Ω–µ—Ç—Å—è!';
      adminAbuseTimerEl.style.color = '#ff5252';
      adminAbuseTimerEl.style.textShadow = '0 0 10px rgba(255, 82, 82, 0.8)';
      
      // –ï—Å–ª–∏ –≤—Ä–µ–º—è –ø—Ä–∏—à–ª–æ, –∑–∞–ø—É—Å–∫–∞–µ–º
      if (timeTo.totalSeconds <= 0) {
        startAdminAbuseEvent();
      }
    } else {
      adminAbuseStatusEl.textContent = '–î–æ –Ω–∞—á–∞–ª–∞';
      adminAbuseTimerEl.style.color = '#ffeb3b';
      adminAbuseTimerEl.style.textShadow = '0 0 10px rgba(255, 235, 59, 0.5)';
      adminAbuseContainer.classList.remove('admin-abuse-active');
    }
  }
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ —Å–æ–±—ã—Ç–∏—è –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
function startAdminAbuseEvent() {
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å
  adminAbusePanel.classList.add('active');
  
  // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
  const moscowTime = getMoscowTime();
  const timeString = moscowTime.toLocaleTimeString('ru-RU', { 
    hour: '2-digit', 
    minute: '2-digit' 
  });
  
  adminAbuseMessageEl.innerHTML = `
    ‚ö° <strong>${timeString}</strong> ‚ö°<br><br>
    –í—Ä–µ–º—è –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞ –Ω–∞—Å—Ç–∞–ª–æ!<br>
    –ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ —Ö–∞–æ—Å—É –∏ –±–µ–∑—É–º–∏—é!<br><br>
    <small>–ê–±—å—é–∑ –ø—Ä–æ–¥–ª–∏—Ç—Å—è 30 –º–∏–Ω—É—Ç</small>
  `;
}

// –§—É–Ω–∫—Ü–∏—è –Ω–∞—á–∞–ª–∞ –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
function startAdminAbuse() {
  isAdminAbuseActive = true;
  adminAbuseEndTime = Date.now() + ADMIN_ABUSE_CONFIG.ACTIVE_DURATION;
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
  adminAbuseData.isActive = true;
  adminAbuseData.endTime = adminAbuseEndTime;
  adminAbuseData.lastActive = Date.now();
  localStorage.setItem(ADMIN_ABUSE_CONFIG.STORAGE_KEY, JSON.stringify(adminAbuseData));
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  adminAbusePanel.classList.remove('active');
  adminAbuseContainer.classList.add('admin-abuse-active');
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  showNotification('‚ö†Ô∏è –ê–î–ú–ò–ù-–ê–ë–¨–Æ–ó –ê–ö–¢–ò–í–ï–ù! ‚ö†Ô∏è', 'red');
  
  // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
  startAdminAbuseEffects();
}

// –§—É–Ω–∫—Ü–∏—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
function endAdminAbuse() {
  isAdminAbuseActive = false;
  adminAbuseEndTime = null;
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
  adminAbuseData.isActive = false;
  adminAbuseData.endTime = null;
  localStorage.setItem(ADMIN_ABUSE_CONFIG.STORAGE_KEY, JSON.stringify(adminAbuseData));
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  adminAbuseContainer.classList.remove('admin-abuse-active');
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  showNotification('‚úÖ –ê–¥–º–∏–Ω-–∞–±—å—é–∑ –∑–∞–≤–µ—Ä—à–µ–Ω!', 'green');
  
  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
  stopAdminAbuseEffects();
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
function showNotification(message, color = 'blue') {
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    background: ${color === 'red' ? 'linear-gradient(45deg, rgba(255, 61, 0, 0.9), rgba(211, 47, 47, 0.9))' : 
                 color === 'green' ? 'linear-gradient(45deg, rgba(76, 175, 80, 0.9), rgba(56, 142, 60, 0.9))' : 
                 'linear-gradient(45deg, rgba(33, 150, 243, 0.9), rgba(25, 118, 210, 0.9))'};
    color: white;
    padding: 20px 30px;
    border-radius: 15px;
    font-size: 1.3rem;
    font-weight: bold;
    z-index: 3000;
    box-shadow: 0 0 30px rgba(0,0,0,0.7);
    animation: fadeInOut 3s forwards;
    text-align: center;
  `;
  
  notification.textContent = message;
  document.body.appendChild(notification);
  
  // –£–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
  setTimeout(() => {
    notification.remove();
  }, 3000);
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞ (–∑–∞–≥–ª—É—à–∫–∞ - –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)
function startAdminAbuseEffects() {
  console.log('–ê–¥–º–∏–Ω-–∞–±—å—é–∑ —ç—Ñ—Ñ–µ–∫—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã!');
  // –ó–¥–µ—Å—å –±—É–¥—É—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞, –∞–Ω–∏–º–∞—Ü–∏–∏, –∑–≤—É–∫–∏ –∏ —Ç.–¥.
  
  // –ü—Ä–∏–º–µ—Ä: –º–∏–≥–∞–Ω–∏–µ —Ñ–æ–Ω–∞
  const originalBg = document.body.style.background;
  let blinkInterval = setInterval(() => {
    document.body.style.background = 
      document.body.style.background === 'red' ? originalBg : 'red';
  }, 500);
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
  window.adminAbuseEffects = {
    blinkInterval: blinkInterval
  };
}

// –§—É–Ω–∫—Ü–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
function stopAdminAbuseEffects() {
  console.log('–ê–¥–º–∏–Ω-–∞–±—å—é–∑ —ç—Ñ—Ñ–µ–∫—Ç—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!');
  
  // –û—á–∏—â–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
  if (window.adminAbuseEffects) {
    if (window.adminAbuseEffects.blinkInterval) {
      clearInterval(window.adminAbuseEffects.blinkInterval);
    }
  }
  
  // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–Ω
  document.body.style.background = '';
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ, –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ –∞–¥–º–∏–Ω-–∞–±—å—é–∑
function checkAdminAbuseOnLoad() {
  if (adminAbuseData.isActive && adminAbuseData.endTime) {
    const timeLeft = adminAbuseData.endTime - Date.now();
    
    if (timeLeft > 0) {
      // –ê–¥–º–∏–Ω-–∞–±—å—é–∑ –≤—Å–µ –µ—â–µ –∞–∫—Ç–∏–≤–µ–Ω
      isAdminAbuseActive = true;
      adminAbuseEndTime = adminAbuseData.endTime;
      adminAbuseContainer.classList.add('admin-abuse-active');
      startAdminAbuseEffects();
    } else {
      // –í—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ
      endAdminAbuse();
    }
  }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
function initAdminAbuse() {
  checkAdminAbuseOnLoad();
  updateAdminAbuseTimer();
  
  // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  if (adminAbuseTimer) clearInterval(adminAbuseTimer);
  adminAbuseTimer = setInterval(updateAdminAbuseTimer, 1000);
}

// –°–æ–±—ã—Ç–∏—è –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
startAdminAbuseBtn.onclick = startAdminAbuse;
closeAdminAbuseBtn.onclick = () => {
  adminAbusePanel.classList.remove('active');
};

// =============================================
// –û–°–¢–ê–õ–¨–ù–û–ô –ö–û–î (–∫–ª–∏–∫–∏, –º–∞–≥–∞–∑–∏–Ω, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è, –ø—Ä–æ–º–æ–∫–æ–¥—ã)
// =============================================
const SKINS = [
  { id: "default", name: "–ö–ª–∞—Å—Å–∏–∫–∞", price: 0, bg: "radial-gradient(circle at 40% 40%, #fff 0%, #d0e8ff 30%, #80b0ff 60%, #3060ff 100%)" },
  { id: "fire", name: "–ü–ª–∞–º—è", price: 250, bg: "radial-gradient(circle at 40% 40%, #fff, #ffe082 20%, #ff9800 50%, #d50000 90%)" },
  { id: "void", name: "–ü—É—Å—Ç–æ—Ç–∞", price: 400, bg: "radial-gradient(circle at 40% 40%, #111, #1a0033 30%, #4a148c 60%, #000 100%)" },
  { id: "toxic", name: "–Ø–¥–æ–≤–∏—Ç—ã–π", price: 600, bg: "radial-gradient(circle at 40% 40%, #e0f2f1, #b2dfdb 30%, #009688 60%, #004d40 100%)" },
  { id: "neon", name: "–ù–µ–æ–Ω", price: 1200, bg: "radial-gradient(circle at 40% 40%, #fff, #e91e63 30%, #00e5ff 60%, #000 100%)" },
  { id: "gold", name: "–ó–æ–ª–æ—Ç–æ–π", price: 2500, bg: "radial-gradient(circle at 40% 40%, #fff, #fff176 30%, #ffc107 60%, #ff8f00 100%)" },
  { id: "2026", name: "–†–æ–∂–¥–µ—Å—Ç–≤–æ", price: "–ü—Ä–æ–º–æ–∫–æ–¥", bg: "radial-gradient(circle at 40% 40%, #ff004d 0%, #ff4d00 30%, #0066ff 60%, #0033aa 100%)" },
  { id: "purple", name: "–§–∏–æ–ª–µ—Ç–æ–≤—ã–π", price: 800, bg: "radial-gradient(circle at 40% 40%, #e1bee7, #ce93d8 30%, #9c27b0 60%, #4a148c 100%)" },
  { id: "cyan", name: "–ì–æ–ª—É–±–æ–π", price: 950, bg: "radial-gradient(circle at 40% 40%, #b2ebf2, #80deea 30%, #00bcd4 60%, #006064 100%)" },
  { id: "lime", name: "–õ–∞–π–º", price: 1100, bg: "radial-gradient(circle at 40% 40%, #f1f8e9, #dcedc8 30%, #cddc39 60%, #827717 100%)" },
  { id: "pink", name: "–†–æ–∑–æ–≤—ã–π", price: 1300, bg: "radial-gradient(circle at 40% 40%, #fce4ec, #f8bbd0 30%, #e91e63 60%, #880e4f 100%)" },
  { id: "orange", name: "–û—Ä–∞–Ω–∂–µ–≤—ã–π", price: 1400, bg: "radial-gradient(circle at 40% 40%, #ffe0b2, #ffcc80 30%, #ff9800 60%, #e65100 100%)" },
  { id: "teal", name: "–ë–∏—Ä—é–∑–∞", price: 1500, bg: "radial-gradient(circle at 40% 40%, #b2dfdb, #80cbc4 30%, #009688 60%, #00251a 100%)" },
  { id: "indigo", name: "–ò–Ω–¥–∏–≥–æ", price: 1800, bg: "radial-gradient(circle at 40% 40%, #c5cae9, #9fa8da 30%, #3f51b5 60%, #1a237e 100%)" },
  { id: "red", name: "–ö—Ä–∞—Å–Ω—ã–π", price: 1600, bg: "radial-gradient(circle at 40% 40%, #ffcdd2, #ef9a9a 30%, #f44336 60%, #b71c1c 100%)" },
  { id: "glass", name: "–°—Ç–µ–∫–ª—è–Ω–Ω—ã–π", price: 2000, bg: "radial-gradient(circle at 40% 40%, rgba(255,255,255,0.9), rgba(173,216,230,0.8) 30%, rgba(100,149,237,0.7) 60%, rgba(25,25,112,0.9) 100%)" },
  { id: "rainbow", name: "–†–∞–¥—É–≥–∞", price: 100000, bg: "radial-gradient(circle at 40% 40%, #fff, #ff0000 30%, #ff7700 60%, #ff0000 100%)", animated: true }
];

const ACHIEVEMENTS = [
  { id: "clicks_100", name: "–ù–æ–≤–∏—á–æ–∫", desc: "–°–¥–µ–ª–∞—Ç—å 100 –∫–ª–∏–∫–æ–≤", icon: "‚úä", target: 100 },
  { id: "clicks_1000", name: "–£–¥–∞—Ä–Ω–∏–∫", desc: "1000 –∫–ª–∏–∫–æ–≤", icon: "üí™", target: 1000 },
  { id: "clicks_5000", name: "–ë–µ–∑—É–º–Ω—ã–π –∫–ª–∏–∫–µ—Ä", desc: "5000 –∫–ª–∏–∫–æ–≤", icon: "üî•", target: 5000 },
  { id: "clicks_20000", name: "–õ–µ–≥–µ–Ω–¥–∞ –≥–ª–∞–∑–∞", desc: "20 000 –∫–ª–∏–∫–æ–≤", icon: "üåü", target: 20000 },
  { id: "skins_3", name: "–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä", desc: "–ö—É–ø–∏—Ç—å 3 —Å–∫–∏–Ω–∞", icon: "üõçÔ∏è", target: 3, type: "skins" },
  { id: "energy_full", name: "–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫", desc: "–ù–∞–∫–æ–ø–∏—Ç—å 100 —ç–Ω–µ—Ä–≥–∏–∏", icon: "‚ö°", target: 100, type: "energy" }
];

const PROMOCODES = {
  "defynet": { description: "–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è!", effect: () => energy = Infinity },
  "test2025": { description: "+500 –æ—á–∫–æ–≤!", effect: () => score += 500 },
  "skinfire": { description: "–°–∫–∏–Ω ¬´–ü–ª–∞–º—è¬ª –±–µ—Å–ø–ª–∞—Ç–Ω–æ!", effect: () => { if (!ownedSkins.includes("fire")) { ownedSkins.push("fire"); currentSkin = "fire"; applySkin(); renderShop(); } } },
  "def2025": { description: "1 000 000 –æ—á–∫–æ–≤!", effect: () => score += 1000000 },
  "2026": { description: "–°–∫–∏–Ω ¬´–†–æ–∂–¥–µ—Å—Ç–≤–æ¬ª –ø–æ–ª—É—á–µ–Ω!", effect: () => { if (!ownedSkins.includes("2026")) { ownedSkins.push("2026"); currentSkin = "2026"; applySkin(); renderShop(); } } },
  "gift": { description: "+10 000 –æ—á–∫–æ–≤!", effect: () => score += 10000 },
  "67": { description: "+10 000 000 –æ—á–∫–æ–≤!", effect: () => score += 10000000 } // –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π
};

const PRESTIGE_COSTS = [500, 1500, 2500, 4000, 5500, 7000, 8500, 10000, 12000, 14000];
const PRESTIGE_LEVELS = 10;

const STORAGE = {
  score: 'eyeClickerScore',
  energy: 'eyeClickerEnergy',
  lastTime: 'eyeClickerLastTime',
  owned: 'eyeClickerOwnedSkins',
  current: 'eyeClickerCurrentSkin',
  progress: 'eyeClickerAchProgress',
  completed: 'eyeClickerAchCompleted',
  usedPromos: 'eyeClickerUsedPromos',
  prestige: 'eyeClickerPrestige',
  clickMultiplier: 'eyeClickerMultiplier',
  totalClicks: 'eyeClickerTotalClicks',
  inventory: 'eyeClickerInventory'
};

let score = Number(localStorage.getItem(STORAGE.score)) || 0;
let energy = Number(localStorage.getItem(STORAGE.energy)) || 100;
let lastTime = Number(localStorage.getItem(STORAGE.lastTime)) || Date.now();
let ownedSkins = JSON.parse(localStorage.getItem(STORAGE.owned)) || ["default"];
let currentSkin = localStorage.getItem(STORAGE.current) || "default";
let achProgress = JSON.parse(localStorage.getItem(STORAGE.progress)) || {};
let completed = new Set(JSON.parse(localStorage.getItem(STORAGE.completed)) || []);
let usedPromos = new Set(JSON.parse(localStorage.getItem(STORAGE.usedPromos)) || []);
let prestigeLevel = Number(localStorage.getItem(STORAGE.prestige)) || 0;
let clickMultiplier = Number(localStorage.getItem(STORAGE.clickMultiplier)) || 1;
let totalClicks = Number(localStorage.getItem(STORAGE.totalClicks)) || 0;
let inventory = JSON.parse(localStorage.getItem(STORAGE.inventory)) || {};

function getMaxEnergy() {
  return 100 + (prestigeLevel * 50);
}

const MAX_ENERGY = getMaxEnergy();

energy = Math.min(MAX_ENERGY, energy + Math.floor((Date.now() - lastTime) / 1000 / 300));

// =============================================
// –¢–û–†–ì–û–í–ï–¶
// =============================================
const TRADER_ITEMS_POOL = [
  {
    id: "energy_boost",
    name: "–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫",
    description: "+50 –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ 1 —á–∞—Å",
    icon: "‚ö°",
    price: 800,
    effect: function() {
      const oldMax = getMaxEnergy();
      const newMax = oldMax + 50;
      energy = Math.min(energy + 50, newMax);
      // –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞ 1 —á–∞—Å
      setTimeout(() => {
        energy = Math.min(energy, oldMax);
        updateUI();
      }, 3600000);
    }
  },
  {
    id: "click_power",
    name: "–£—Å–∏–ª–∏—Ç–µ–ª—å –∫–ª–∏–∫–∞",
    description: "√ó2 –∫ –º–Ω–æ–∂–∏—Ç–µ–ª—é –Ω–∞ 30 –º–∏–Ω—É—Ç",
    icon: "üí•",
    price: 1200,
    effect: function() {
      const oldMultiplier = clickMultiplier;
      clickMultiplier *= 2;
      multiplierEl.textContent = `√ó${clickMultiplier}`;
      // –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞ 30 –º–∏–Ω—É—Ç
      setTimeout(() => {
        clickMultiplier = oldMultiplier;
        multiplierEl.textContent = `√ó${clickMultiplier}`;
      }, 1800000);
    }
  },
  {
    id: "time_skip",
    name: "–ü—Ä–æ–ø—É—Å–∫ –≤—Ä–µ–º–µ–Ω–∏",
    description: "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—é —ç–Ω–µ—Ä–≥–∏—é –º–≥–Ω–æ–≤–µ–Ω–Ω–æ",
    icon: "‚è©",
    price: 1500,
    effect: function() {
      energy = getMaxEnergy();
      updateUI();
    }
  },
  {
    id: "score_boost",
    name: "–£–¥–≤–æ–∏—Ç–µ–ª—å –æ—á–∫–æ–≤",
    description: "–°–ª–µ–¥—É—é—â–∏–µ 100 –∫–ª–∏–∫–æ–≤ –¥–∞—é—Ç √ó2 –æ—á–∫–æ–≤",
    icon: "üí∞",
    price: 2000,
    effect: function() {
      let clicksLeft = 100;
      const originalClick = eye.onclick;
      
      eye.onclick = () => {
        if (clicksLeft > 0 && energy > 0) {
          score += clickMultiplier * 2; // –í–¥–≤–æ–µ –±–æ–ª—å—à–µ
          clicksLeft--;
        } else {
          score += clickMultiplier;
        }
        energy--;
        totalClicks++;
        checkAchievements();
        updateUI();
        saveProgress();
        if (navigator.vibrate) navigator.vibrate(12);
        
        if (clicksLeft === 0) {
          eye.onclick = originalClick;
        }
      };
    }
  },
  {
    id: "prestige_token",
    name: "–¢–æ–∫–µ–Ω –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è",
    description: "+1 —É—Ä–æ–≤–µ–Ω—å –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –æ—á–∫–æ–≤",
    icon: "‚≠ê",
    price: 5000,
    effect: function() {
      prestigeLevel++;
      clickMultiplier++;
      localStorage.setItem(STORAGE.prestige, prestigeLevel);
      localStorage.setItem(STORAGE.clickMultiplier, clickMultiplier);
      updatePrestigeUI();
      alert(`üéâ –¢–æ–∫–µ–Ω –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω! –¢–µ–ø–µ—Ä—å —É—Ä–æ–≤–µ–Ω—å ${prestigeLevel} –∏ –º–Ω–æ–∂–∏—Ç–µ–ª—å √ó${clickMultiplier}`);
    }
  },
  {
    id: "skin_discount",
    name: "–°–∫–∏–¥–∫–∞ –Ω–∞ —Å–∫–∏–Ω—ã",
    description: "50% —Å–∫–∏–¥–∫–∞ –Ω–∞ –≤—Å–µ —Å–∫–∏–Ω—ã –Ω–∞ 10 –º–∏–Ω—É—Ç",
    icon: "üé®",
    price: 3000,
    effect: function() {
      SKINS.forEach(skin => {
        if (skin.price !== "–ü—Ä–æ–º–æ–∫–æ–¥" && skin.price > 0) {
          skin.originalPrice = skin.price;
          skin.price = Math.floor(skin.price / 2);
        }
      });
      renderShop();
      
      // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ü–µ–Ω—ã —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç
      setTimeout(() => {
        SKINS.forEach(skin => {
          if (skin.originalPrice) {
            skin.price = skin.originalPrice;
            delete skin.originalPrice;
          }
        });
        renderShop();
      }, 600000);
    }
  },
  {
    id: "case_bundle",
    name: "–ù–∞–±–æ—Ä –∫–µ–π—Å–æ–≤",
    description: "3 —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–µ–π—Å–∞ + 2 –∫–µ–π—Å–∞ —Å–æ —Å–∫–∏–Ω–∞–º–∏",
    icon: "üéÅ",
    price: 8000,
    effect: function() {
      // 3 –æ–±—ã—á–Ω—ã—Ö –∫–µ–π—Å–∞
      for (let i = 0; i < 3; i++) {
        setTimeout(() => {
          const reward = generateCaseReward();
          score += reward;
          alert(`üéâ –¢—ã –ø–æ–ª—É—á–∏–ª ${reward} –æ—á–∫–æ–≤ –∏–∑ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–µ–π—Å–∞!`);
          updateUI();
          saveProgress();
        }, i * 1000);
      }
      
      // 2 –∫–µ–π—Å–∞ —Å–æ —Å–∫–∏–Ω–∞–º–∏
      for (let i = 0; i < 2; i++) {
        setTimeout(() => {
          const skin = generateSkinCaseReward();
          if (!ownedSkins.includes(skin.id)) {
            ownedSkins.push(skin.id);
            alert(`üé® –¢—ã –ø–æ–ª—É—á–∏–ª –Ω–æ–≤—ã–π —Å–∫–∏–Ω: ${skin.name}!`);
          } else {
            alert(`üé® –¢—ã –ø–æ–ª—É—á–∏–ª —Å–∫–∏–Ω: ${skin.name} (—É–∂–µ –±—ã–ª –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏)`);
          }
          renderShop();
          saveProgress();
        }, (i + 3) * 1000);
      }
    }
  },
  {
    id: "rainbow_charm",
    name: "–†–∞–¥—É–∂–Ω—ã–π –∞–º—É–ª–µ—Ç",
    description: "5% —à–∞–Ω—Å –ø–æ–ª—É—á–∏—Ç—å √ó10 –æ—á–∫–æ–≤ –∑–∞ –∫–ª–∏–∫",
    icon: "üåà",
    price: 10000,
    effect: function() {
      const originalClick = eye.onclick;
      
      eye.onclick = () => {
        if (energy > 0) {
          let multiplier = clickMultiplier;
          if (Math.random() < 0.05) { // 5% —à–∞–Ω—Å
            multiplier *= 10;
            // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
            eye.style.boxShadow = "0 0 80px rgba(255,0,255,.9), inset 0 0 80px rgba(0,0,0,.4)";
            setTimeout(() => {
              eye.style.boxShadow = "0 0 60px rgba(48,96,255,.7), inset 0 0 80px rgba(0,0,0,.4)";
            }, 300);
          }
          
          score += multiplier;
          energy--;
          totalClicks++;
          checkAchievements();
          updateUI();
          saveProgress();
          if (navigator.vibrate) navigator.vibrate(12);
        }
      };
      
      // –≠—Ñ—Ñ–µ–∫—Ç –¥–ª–∏—Ç—Å—è 15 –º–∏–Ω—É—Ç
      setTimeout(() => {
        eye.onclick = originalClick;
        eye.style.boxShadow = "0 0 60px rgba(48,96,255,.7), inset 0 0 80px rgba(0,0,0,.4)";
      }, 900000);
    }
  }
];

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–æ—Ä–≥–æ–≤—Ü–∞
let currentTraderItems = [];
let traderUpdateTime = localStorage.getItem('eyeClickerTraderUpdate') || Date.now();
let traderTimerInterval = null;

// DOM —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–æ—Ä–≥–æ–≤—Ü–∞
const toggleTraderBtn = document.getElementById('toggleTrader');
const traderModal = document.getElementById('traderModal');
const closeTraderBtn = document.getElementById('closeTrader');
const traderItemsContainer = document.getElementById('traderItems');
const traderTimerEl = document.getElementById('traderTimer');

// DOM —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
const toggleInventoryBtn = document.getElementById('toggleInventory');
const inventoryModal = document.getElementById('inventoryModal');
const closeInventoryBtn = document.getElementById('closeInventory');
const inventoryItemsContainer = document.getElementById('inventoryItems');

// –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
function addToInventory(itemId, quantity = 1) {
  if (!inventory[itemId]) {
    inventory[itemId] = quantity;
  } else {
    inventory[itemId] += quantity;
  }
  saveInventory();
  renderInventory();
}

// –§—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
function useFromInventory(itemId) {
  if (!inventory[itemId] || inventory[itemId] <= 0) return false;
  
  const item = TRADER_ITEMS_POOL.find(i => i.id === itemId);
  if (!item) return false;
  
  // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç
  item.effect();
  
  // –£–º–µ–Ω—å—à–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
  inventory[itemId]--;
  if (inventory[itemId] <= 0) {
    delete inventory[itemId];
  }
  
  saveInventory();
  renderInventory();
  return true;
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
function saveInventory() {
  localStorage.setItem(STORAGE.inventory, JSON.stringify(inventory));
}

// –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
function renderInventory() {
  inventoryItemsContainer.innerHTML = '';
  
  const itemIds = Object.keys(inventory);
  
  if (itemIds.length === 0) {
    const emptyDiv = document.createElement('div');
    emptyDiv.className = 'inventory-empty';
    emptyDiv.innerHTML = `
      <div class="inventory-empty-icon">üéí</div>
      <p>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</p>
      <p style="font-size: 0.9rem; margin-top: 10px;">–ö—É–ø–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç—ã —É —Ç–æ—Ä–≥–æ–≤—Ü–∞, —á—Ç–æ–±—ã –æ–Ω–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –∑–¥–µ—Å—å</p>
    `;
    inventoryItemsContainer.appendChild(emptyDiv);
    return;
  }
  
  itemIds.forEach(itemId => {
    const item = TRADER_ITEMS_POOL.find(i => i.id === itemId);
    if (!item) return;
    
    const quantity = inventory[itemId];
    
    const itemEl = document.createElement('div');
    itemEl.className = 'inventory-item';
    
    const icon = document.createElement('div');
    icon.className = 'inventory-item-icon';
    icon.textContent = item.icon;
    
    const name = document.createElement('div');
    name.className = 'inventory-item-name';
    name.textContent = item.name;
    
    const desc = document.createElement('div');
    desc.className = 'inventory-item-desc';
    desc.textContent = item.description;
    
    const quantityBadge = document.createElement('div');
    quantityBadge.className = 'inventory-item-quantity';
    quantityBadge.textContent = quantity;
    
    const useBtn = document.createElement('button');
    useBtn.className = 'inventory-use-btn';
    useBtn.textContent = '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å';
    
    useBtn.onclick = () => {
      if (useFromInventory(itemId)) {
        alert(`‚úÖ ${item.name} –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!`);
      }
    };
    
    itemEl.append(icon, name, desc, quantityBadge, useBtn);
    inventoryItemsContainer.appendChild(itemEl);
  });
}

// –°–æ–±—ã—Ç–∏—è –¥–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
toggleInventoryBtn.onclick = () => {
  inventoryModal.classList.add('active');
  renderInventory();
};

closeInventoryBtn.onclick = () => {
  inventoryModal.classList.remove('active');
};

// –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
function generateTraderItems() {
  // –í—ã–±–∏—Ä–∞–µ–º 4 —Å–ª—É—á–∞–π–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞ –∏–∑ –ø—É–ª–∞
  const shuffled = [...TRADER_ITEMS_POOL].sort(() => 0.5 - Math.random());
  currentTraderItems = shuffled.slice(0, 4);
  traderUpdateTime = Date.now();
  localStorage.setItem('eyeClickerTraderUpdate', traderUpdateTime);
  localStorage.setItem('eyeClickerTraderItems', JSON.stringify(currentTraderItems));
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
function loadTraderItems() {
  const savedItems = localStorage.getItem('eyeClickerTraderItems');
  const savedTime = localStorage.getItem('eyeClickerTraderUpdate');
  
  if (savedItems && savedTime) {
    const timePassed = Date.now() - savedTime;
    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (300000 –º—Å)
    if (timePassed < 300000) {
      currentTraderItems = JSON.parse(savedItems);
      traderUpdateTime = Number(savedTime);
    } else {
      generateTraderItems();
    }
  } else {
    generateTraderItems();
  }
}

// –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Ç–æ—Ä–≥–æ–≤—Ü–∞
function renderTraderItems() {
  traderItemsContainer.innerHTML = '';
  
  currentTraderItems.forEach(item => {
    const itemEl = document.createElement('div');
    itemEl.className = 'trader-item';
    
    const icon = document.createElement('div');
    icon.className = 'trader-item-icon';
    icon.textContent = item.icon;
    
    const name = document.createElement('div');
    name.className = 'trader-item-name';
    name.textContent = item.name;
  
    const desc = document.createElement('div');
    desc.className = 'trader-item-desc';
    desc.textContent = item.description;
    
    const price = document.createElement('div');
    price.className = 'trader-item-price';
    price.textContent = `${item.price.toLocaleString()} –æ—á–∫–æ–≤`;
    
    const buyBtn = document.createElement('button');
    buyBtn.className = 'trader-buy-btn';
    buyBtn.textContent = '–ö—É–ø–∏—Ç—å';
    buyBtn.disabled = score < item.price;
    
    buyBtn.onclick = () => {
      if (score >= item.price) {
        score -= item.price;
        // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ–¥–º–µ—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
        addToInventory(item.id, 1);
        updateUI();
        saveProgress();
        renderTraderItems(); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
        alert(`‚úÖ ${item.name} –∫—É–ø–ª–µ–Ω! –¢–µ–ø–µ—Ä—å –æ–Ω –≤ –≤–∞—à–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ.`);
      }
    };
    
    itemEl.append(icon, name, desc, price, buyBtn);
    traderItemsContainer.appendChild(itemEl);
  });
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ —Ç–æ—Ä–≥–æ–≤—Ü–∞
function updateTraderTimer() {
  const timeLeft = 300000 - (Date.now() - traderUpdateTime);
  
  if (timeLeft <= 0) {
    generateTraderItems();
    renderTraderItems();
    updateTraderTimer();
    return;
  }
  
  const minutes = Math.floor(timeLeft / 60000);
  const seconds = Math.floor((timeLeft % 60000) / 1000);
  traderTimerEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
}

// –°–æ–±—ã—Ç–∏—è –¥–ª—è —Ç–æ—Ä–≥–æ–≤—Ü–∞
toggleTraderBtn.onclick = () => {
  traderModal.classList.add('active');
  renderTraderItems();
  updateTraderTimer();
  
  // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
  if (traderTimerInterval) clearInterval(traderTimerInterval);
  traderTimerInterval = setInterval(updateTraderTimer, 1000);
};

closeTraderBtn.onclick = () => {
  traderModal.classList.remove('active');
  if (traderTimerInterval) {
    clearInterval(traderTimerInterval);
    traderTimerInterval = null;
  }
};

// =============================================
// –ö–ï–ô–°–´
// =============================================
const CASE_PRICE = 1500;
const CASE_MIN_REWARD = 100;
const CASE_MAX_REWARD = 10000;
const SKIN_CASE_PRICE = 1000;

function generateCaseReward() {
  return Math.floor(Math.random() * (CASE_MAX_REWARD - CASE_MIN_REWARD + 1)) + CASE_MIN_REWARD;
}

function generateSkinCaseReward() {
  // 1% —à–∞–Ω—Å –Ω–∞ —Ä–∞–¥—É–∂–Ω—ã–π —Å–∫–∏–Ω
  if (Math.random() < 0.01) {
    return SKINS.find(s => s.id === 'rainbow');
  }
  // 99% –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∫–∏–Ω—ã (–∫—Ä–æ–º–µ —Ä–∞–¥—É–∂–Ω–æ–≥–æ)
  const nonRainbowSkins = SKINS.filter(s => s.id !== 'rainbow');
  return nonRainbowSkins[Math.floor(Math.random() * nonRainbowSkins.length)];
}

// DOM
const eye = document.getElementById('eye');
const scoreEl = document.getElementById('score');
const multiplierEl = document.getElementById('multiplier');
const energyBar = document.getElementById('energyBar');
const energyText = document.getElementById('energyText');
const noEnergyMsg = document.getElementById('noEnergyMsg');
const promoInput = document.getElementById('promoInput');
const activateBtn = document.getElementById('activatePromo');
const promoResult = document.getElementById('promoResult');
const promoBox = document.getElementById('promoBox');
const togglePromo = document.getElementById('togglePromo');
const shop = document.getElementById('shop');
const achPanel = document.getElementById('achievements');
const prestigePanel = document.getElementById('prestige');
const skinGrid = document.getElementById('skinGrid');
const achGrid = document.getElementById('achGrid');
const btnShop = document.getElementById('toggleShop');
const btnCloseShop = document.getElementById('closeShop');
const openCaseBtn = document.getElementById('openCaseBtn');
const caseResult = document.getElementById('caseResult');
const openSkinCaseBtn = document.getElementById('openSkinCaseBtn');
const skinCaseResult = document.getElementById('skinCaseResult');
const btnAch = document.getElementById('toggleAch');
const btnCloseAch = document.getElementById('closeAch');
const btnPrestige = document.getElementById('togglePrestige');
const btnClosePrestige = document.getElementById('closePrestige');
const doPrestigeBtn = document.getElementById('doPrestige');
const prestigeStatus = document.getElementById('prestigeStatus');
const currentPrestigeEl = document.getElementById('currentPrestige');
const nextMultiplierEl = document.getElementById('nextMultiplier');

// Drawing modal elements
const drawModal = document.getElementById('drawModal');
const toggleDrawBtn = document.getElementById('toggleDraw');
const closeDrawModalBtn = document.getElementById('closeDrawModalBtn');
const saveSkinBtn = document.getElementById('saveSkinBtn');
const clearCanvasBtn = document.getElementById('clearCanvasBtn');
const drawCanvas = document.getElementById('drawCanvas');
const colorPicker = document.getElementById('colorPicker');
const backgroundColorPicker = document.getElementById('backgroundColorPicker');
const brushSize = document.getElementById('brushSize');
const ctx = drawCanvas.getContext('2d');
let isDrawing = false;

// =============================================
// –†–ò–°–û–í–ê–ù–ò–ï –°–ö–ò–ù–ê
// =============================================
function clearCanvas() {
  ctx.fillStyle = backgroundColorPicker.value;
  ctx.fillRect(0, 0, drawCanvas.width, drawCanvas.height);
}

function startDrawing(e) {
  e.preventDefault();
  isDrawing = true;
  draw(e);
}

function stopDrawing() {
  isDrawing = false;
  ctx.beginPath();
}

function draw(e) {
  if (!isDrawing) return;
  e.preventDefault();
  const rect = drawCanvas.getBoundingClientRect();
  
  let clientX, clientY;
  if (e.touches) {
    clientX = e.touches[0].clientX;
    clientY = e.touches[0].clientY;
  } else {
    clientX = e.clientX;
    clientY = e.clientY;
  }

  const x = clientX - rect.left;
  const y = clientY - rect.top;

  ctx.lineWidth = brushSize.value;
  ctx.lineCap = 'round';
  ctx.strokeStyle = colorPicker.value;

  ctx.lineTo(x, y);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(x, y);
}

drawCanvas.addEventListener('mousedown', startDrawing);
drawCanvas.addEventListener('mouseup', stopDrawing);
drawCanvas.addEventListener('mousemove', draw);
drawCanvas.addEventListener('mouseout', stopDrawing);

drawCanvas.addEventListener('touchstart', startDrawing, { passive: false });
drawCanvas.addEventListener('touchend', stopDrawing);
drawCanvas.addEventListener('touchmove', draw, { passive: false });

toggleDrawBtn.onclick = () => {
  drawModal.classList.add('active');
  clearCanvas();
};

backgroundColorPicker.onchange = clearCanvas;
clearCanvasBtn.onclick = clearCanvas;

closeDrawModalBtn.onclick = () => {
  drawModal.classList.remove('active');
};

saveSkinBtn.onclick = () => {
  const dataUrl = drawCanvas.toDataURL('image/png');
  const customSkin = {
    id: "custom",
    name: "–°–≤–æ–π —Å–∫–∏–Ω",
    price: 0,
    bg: `url(${dataUrl})`,
    custom: true
  };

  const existingSkinIndex = SKINS.findIndex(s => s.id === 'custom');
  if (existingSkinIndex > -1) {
    SKINS[existingSkinIndex] = customSkin;
  } else {
    SKINS.push(customSkin);
  }

  if (!ownedSkins.includes('custom')) {
    ownedSkins.push('custom');
  }
  currentSkin = 'custom';
  
  applySkin();
  renderShop();
  saveProgress();
  
  drawModal.classList.remove('active');
};

// =============================================
// –ü–ï–†–ï–†–ï–ñ–î–ï–ù–ò–Ø
// =============================================
function updatePrestigeUI() {
  currentPrestigeEl.textContent = prestigeLevel;
  multiplierEl.textContent = `√ó${clickMultiplier}`;

  if (prestigeLevel >= PRESTIGE_LEVELS) {
    doPrestigeBtn.disabled = true;
    prestigeStatus.textContent = '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç!';
    return;
  }

  const required = PRESTIGE_COSTS[prestigeLevel];
  const nextLevel = prestigeLevel + 1;
  nextMultiplierEl.textContent = nextLevel + 1;

  const enoughAchievements = [...completed].length >= 2;
  doPrestigeBtn.disabled = score < required || !enoughAchievements;

  prestigeStatus.textContent = doPrestigeBtn.disabled
    ? `–ù—É–∂–Ω–æ ${required.toLocaleString()} –æ—á–∫–æ–≤ + 2 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è`
    : '–ì–æ—Ç–æ–≤–æ! –ù–∞–∂–º–∏, —á—Ç–æ–±—ã –ø–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è';
}

doPrestigeBtn.onclick = () => {
  if (doPrestigeBtn.disabled) return;

  prestigeLevel++;
  clickMultiplier++;
  score = 0;
  energy = getMaxEnergy();
  localStorage.setItem(STORAGE.prestige, prestigeLevel);
  localStorage.setItem(STORAGE.clickMultiplier, clickMultiplier);

  updateUI();
  updatePrestigeUI();
  prestigeStatus.textContent = `–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ ${prestigeLevel} –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! –¢–µ–ø–µ—Ä—å √ó${clickMultiplier} –∑–∞ –∫–ª–∏–∫`;
  setTimeout(() => prestigeStatus.textContent = '', 5000);
};

// =============================================
// –ü–†–û–ú–û–ö–û–î–´
// =============================================
togglePromo.onclick = () => {
  promoBox.style.display = promoBox.style.display === 'block' ? 'none' : 'block';
};

activateBtn.onclick = () => {
  const code = promoInput.value.trim().toLowerCase();
  if (!code) return;

  if (code === "67") {
    score += 10000000;
    saveProgress();
    updateUI();
    promoResult.className = 'promo-result success';
    promoResult.textContent = '+10 000 000 –æ—á–∫–æ–≤! –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ';
  } else if (usedPromos.has(code)) {
    promoResult.className = 'promo-result error';
    promoResult.textContent = '–≠—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!';
  } else if (PROMOCODES[code]) {
    PROMOCODES[code].effect();
    usedPromos.add(code);
    saveProgress();
    updateUI();
    promoResult.className = 'promo-result success';
    promoResult.textContent = PROMOCODES[code].description;
  } else {
    promoResult.className = 'promo-result error';
    promoResult.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥';
  }

  promoInput.value = '';
  setTimeout(() => promoResult.textContent = '', 5000);
};

// =============================================
// –§–£–ù–ö–¶–ò–ò
// =============================================
function saveProgress() {
  localStorage.setItem(STORAGE.score, score);
  localStorage.setItem(STORAGE.energy, energy);
  localStorage.setItem(STORAGE.lastTime, Date.now());
  localStorage.setItem(STORAGE.owned, JSON.stringify(ownedSkins));
  localStorage.setItem(STORAGE.current, currentSkin);
  localStorage.setItem(STORAGE.progress, JSON.stringify(achProgress));
  localStorage.setItem(STORAGE.completed, JSON.stringify([...completed]));
  localStorage.setItem(STORAGE.usedPromos, JSON.stringify([...usedPromos]));
  localStorage.setItem(STORAGE.prestige, prestigeLevel);
  localStorage.setItem(STORAGE.clickMultiplier, clickMultiplier);
  localStorage.setItem(STORAGE.totalClicks, totalClicks);
  saveInventory();
  saveShipData();
  localStorage.setItem(ADMIN_ABUSE_CONFIG.STORAGE_KEY, JSON.stringify(adminAbuseData));
}

function applySkin() {
  const skin = SKINS.find(s => s.id === currentSkin) || SKINS[0];
  eye.style.background = skin.bg;
  if (skin.custom) {
    eye.style.backgroundSize = 'cover';
    eye.style.backgroundPosition = 'center';
  } else {
    eye.style.backgroundSize = 'auto';
  }
  eye.classList.toggle('rainbow-eye', skin.animated === true);
}

// =============================================
// –î–û–°–¢–ò–ñ–ï–ù–ò–Ø
// =============================================
function checkAchievements() {
  ACHIEVEMENTS.forEach(ach => {
    if (completed.has(ach.id)) return; // —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

    let current = 0;
    
    if (ach.type === 'skins') {
      current = ownedSkins.length - 1; // –∏—Å–∫–ª—é—á–∞–µ–º "default"
    } else if (ach.type === 'energy') {
      current = Math.floor(energy);
    } else {
      current = totalClicks;
    }
    
    achProgress[ach.id] = current;
    
    if (current >= ach.target) {
      completed.add(ach.id);
      achProgress[ach.id] = ach.target;
    }
  });
}

// =============================================
// –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–ï–ô–°–û–í
// =============================================
const caseModal = document.getElementById('caseModal');
const caseRoulette = document.getElementById('caseRoulette');
const caseModalResult = document.getElementById('caseModalResult');

openCaseBtn.onclick = () => {
  if (score < CASE_PRICE) {
    caseResult.textContent = '‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—á–∫–æ–≤!';
    caseResult.style.color = '#ff5252';
    setTimeout(() => caseResult.textContent = '', 3000);
    return;
  }

  if (openCaseBtn.disabled) return;
  openCaseBtn.disabled = true;

  // –í—ã—á–∏—Ç–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–µ–π—Å–∞
  score -= CASE_PRICE;
  updateUI();
  
  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–∞–≥—Ä–∞–¥—É
  const reward = generateCaseReward();
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä—É–ª–µ—Ç–∫–∏
  caseModal.classList.add('active');
  caseRoulette.textContent = '500';
  caseModalResult.textContent = '';
  caseRoulette.classList.add('roulette-rolling');
  
  // –ö—Ä—É—Ç–∏–º —Ä—É–ª–µ—Ç–∫—É 3 —Å–µ–∫—É–Ω–¥—ã (–º–µ–¥–ª–µ–Ω–Ω–æ)
  let counter = 0;
  const rouletteInterval = setInterval(() => {
    caseRoulette.textContent = Math.floor(Math.random() * 10000) + 100;
    counter++;
    if (counter > 30) {
      clearInterval(rouletteInterval);
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
      caseRoulette.classList.remove('roulette-rolling');
      caseRoulette.textContent = reward;
      
      score += reward;
      updateUI();
      saveProgress();
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
      setTimeout(() => {
        caseModalResult.textContent = `üéâ –¢—ã –≤—ã–∏–≥—Ä–∞–ª ${reward} –æ—á–∫–æ–≤!`;
        
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        setTimeout(() => {
          caseModal.classList.remove('active');
          openCaseBtn.disabled = false;
        }, 3000);
      }, 800);
    }
  }, 150);
};

// –ö–µ–π—Å —Å–æ —Å–∫–∏–Ω–∞–º–∏
openSkinCaseBtn.onclick = () => {
  if (score < SKIN_CASE_PRICE) {
    skinCaseResult.textContent = '‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—á–∫–æ–≤!';
    skinCaseResult.style.color = '#ff5252';
    setTimeout(() => skinCaseResult.textContent = '', 3000);
    return;
  }

  if (openSkinCaseBtn.disabled) return;
  openSkinCaseBtn.disabled = true;

  // –í—ã—á–∏—Ç–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å
  score -= SKIN_CASE_PRICE;
  updateUI();

  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫–∏–Ω
  const finalSkin = generateSkinCaseReward();
  
  // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
  const skinCaseModal = document.getElementById('skinCaseModal');
  const skinRouletteSkin = document.getElementById('skinRouletteSkin');
  const skinRouletteText = document.getElementById('skinRouletteText');
  const skinCaseModalResult = document.getElementById('skinCaseModalResult');
  
  skinCaseModal.classList.add('active');
  skinRouletteText.textContent = '–ö—Ä—É—Ç–∏—Ç—Å—è...';
  skinCaseModalResult.textContent = '';
  
  // –ö—Ä—É—Ç–∏–º —Ä—É–ª–µ—Ç–∫—É - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å–∫–∏–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 3 —Å–µ–∫—É–Ω–¥
  let counter = 0;
  const rouletteInterval = setInterval(() => {
    const randomSkin = SKINS[Math.floor(Math.random() * SKINS.length)];
    skinRouletteSkin.style.background = randomSkin.bg;
    skinRouletteText.textContent = randomSkin.name;
    counter++;
    
    if (counter > 40) {
      clearInterval(rouletteInterval);
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫–∏–Ω
      skinRouletteSkin.style.background = finalSkin.bg;
      skinRouletteText.textContent = finalSkin.name;
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–∫–∏–Ω —É–∂–µ
      if (!ownedSkins.includes(finalSkin.id)) {
        // –ù–æ–≤—ã–π —Å–∫–∏–Ω!
        ownedSkins.push(finalSkin.id);
        currentSkin = finalSkin.id;
        applySkin();
        renderShop();
        skinCaseModalResult.textContent = `üéâ –ù–æ–≤—ã–π —Å–∫–∏–Ω: ${finalSkin.name}!`;
        skinCaseModalResult.style.color = '#76ff03';
      } else {
        // –°–∫–∏–Ω —É–∂–µ –µ—Å—Ç—å
        skinCaseModalResult.textContent = `üòÖ –£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å: ${finalSkin.name}`;
        skinCaseModalResult.style.color = '#ffeb3b';
      }
      
      saveProgress();
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
      setTimeout(() => {
        skinCaseModal.classList.remove('active');
        openSkinCaseBtn.disabled = false;
      }, 3000);
    }
  }, 120);
};

function updateUI() {
  scoreEl.textContent = score.toLocaleString();
  const maxEnergy = getMaxEnergy();
  const percent = (energy / maxEnergy) * 100;
  energyBar.style.width = percent + '%';
  energyText.textContent = `${Math.floor(energy)} / ${maxEnergy}`;

  eye.classList.toggle('low-energy', energy <= 0);
  noEnergyMsg.style.opacity = energy <= 0 ? '1' : '0';

  applySkin();
}

function renderShop() {
  skinGrid.innerHTML = '';
  SKINS.forEach(skin => {
    const item = document.createElement('div');
    item.className = 'skin-item';
    if (ownedSkins.includes(skin.id)) item.classList.add('owned');
    if (currentSkin === skin.id) item.classList.add('current');

    const preview = document.createElement('div');
    preview.className = 'preview';
    preview.style.background = skin.bg;
    if (skin.custom) {
      preview.style.backgroundSize = 'cover';
      preview.style.backgroundPosition = 'center';
    }

    const name = document.createElement('div');
    name.textContent = skin.name;

    const price = document.createElement('div');
    price.textContent = skin.price === 0 ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : (skin.price === "–ü—Ä–æ–º–æ–∫–æ–¥" ? "–ü—Ä–æ–º–æ–∫–æ–¥" : `${skin.price} –æ—á–∫–æ–≤`);

    const btn = document.createElement('button');
    btn.className = 'buy-btn';

    if (ownedSkins.includes(skin.id)) {
      btn.textContent = currentSkin === skin.id ? '–í—ã–±—Ä–∞–Ω–æ' : '–í—ã–±—Ä–∞—Ç—å';
      btn.disabled = currentSkin === skin.id;
      btn.onclick = () => {
        currentSkin = skin.id;
        updateUI();
        renderShop();
        saveProgress();
      };
    } else if (skin.price !== "–ü—Ä–æ–º–æ–∫–æ–¥") {
      btn.textContent = `–ö—É–ø–∏—Ç—å (${skin.price})`;
      btn.disabled = score < skin.price;
      btn.onclick = () => {
        if (score >= skin.price) {
          score -= skin.price;
          ownedSkins.push(skin.id);
          currentSkin = skin.id;
          checkAchievements();
          updateUI();
          renderShop();
          saveProgress();
        }
      };
    } else {
      btn.textContent = '–ü—Ä–æ–º–æ–∫–æ–¥';
      btn.disabled = true;
    }

    item.append(preview, name, price, btn);
    skinGrid.appendChild(item);
  });
}

function renderAchievements() {
  achGrid.innerHTML = '';
  ACHIEVEMENTS.forEach(ach => {
    const item = document.createElement('div');
    item.className = 'ach-item';
    if (completed.has(ach.id)) item.classList.add('completed');

    const icon = document.createElement('div');
    icon.className = 'icon';
    icon.textContent = ach.icon;

    const name = document.createElement('div');
    name.textContent = ach.name;
    name.style.fontWeight = 'bold';

    const desc = document.createElement('div');
    desc.textContent = ach.desc;
    desc.style.fontSize = '0.9rem';
    desc.style.opacity = '0.85';

    const progress = document.createElement('div');
    progress.style.marginTop = '10px';
    progress.style.fontSize = '0.95rem';

    if (completed.has(ach.id)) {
      progress.textContent = '‚úì –í—ã–ø–æ–ª–Ω–µ–Ω–æ';
      progress.style.color = '#ffd54f';
    } else {
      let val = achProgress[ach.id] || 0;
      progress.textContent = `${val.toLocaleString()} / ${ach.target.toLocaleString()}`;
      progress.style.color = '#b0bec5';
    }

    item.append(icon, name, desc, progress);
    achGrid.appendChild(item);
  });
}

// –°–û–ë–´–¢–ò–Ø –ö–õ–ò–ö–ê (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å —É—á–µ—Ç–æ–º –õ—É–Ω—ã)
const originalEyeClick = eye.onclick;
eye.onclick = () => {
  if (energy > 0) {
    let pointsPerClick = clickMultiplier;
    
    // –ï—Å–ª–∏ –Ω–∞ –õ—É–Ω–µ, —É–º–Ω–æ–∂–∞–µ–º –Ω–∞ 10
    if (moonMultiplierActive) {
      pointsPerClick *= SHIP_CONFIG.MOON_MULTIPLIER;
    }
    
    score += pointsPerClick;
    energy--;
    totalClicks++;
    checkAchievements();
    updateUI();
    saveProgress();
    if (navigator.vibrate) navigator.vibrate(12);
  }
};

// –°–æ–±—ã—Ç–∏–µ –¥–ª—è –ø–æ—Å–∞–¥–∫–∏ –≤ –∫–æ—Ä–∞–±–ª—å
boardShipBtn.onclick = boardSpaceship;

// –°–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
btnShop.onclick = () => { shop.style.display = 'block'; btnShop.style.display = 'none'; renderShop(); };
btnCloseShop.onclick = () => { shop.style.display = 'none'; btnShop.style.display = 'inline-block'; };

btnAch.onclick = () => { achPanel.style.display = 'block'; btnAch.style.display = 'none'; renderAchievements(); };
btnCloseAch.onclick = () => { achPanel.style.display = 'none'; btnAch.style.display = 'inline-block'; };

btnPrestige.onclick = () => { prestigePanel.style.display = 'block'; btnPrestige.style.display = 'none'; updatePrestigeUI(); };
btnClosePrestige.onclick = () => { prestigePanel.style.display = 'none'; btnPrestige.style.display = 'inline-block'; };

// –¢–ê–ô–ú–ï–†–´
setInterval(saveProgress, 8000);
setInterval(() => {
  const maxEnergy = getMaxEnergy();
  if (energy < maxEnergy) {
    energy += 1;
    updateUI();
    saveProgress();
  }
}, 3000);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—Ü–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
loadTraderItems();
renderInventory();

// –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω
createAnimatedBackground();

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∞–±–ª—è
initSpaceship();

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω-–∞–±—å—é–∑–∞
initAdminAbuse();

// –î–æ–±–∞–≤–ª—è–µ–º CSS –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
const style = document.createElement('style');
style.textContent = `
  @keyframes fadeInOut {
    0% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
    15% { opacity: 1; transform: translateX(-50%) translateY(0); }
    85% { opacity: 1; transform: translateX(-50%) translateY(0); }
    100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
  }
`;
document.head.appendChild(style);

// –°–¢–ê–†–¢
updateUI();
renderShop();
renderAchievements();
updatePrestigeUI();
</script>
</body>
</html>